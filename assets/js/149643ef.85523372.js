"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[16166],{3905:(e,n,r)=>{r.d(n,{Zo:()=>p,kt:()=>d});var s=r(67294);function t(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function a(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,s)}return r}function i(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?a(Object(r),!0).forEach((function(n){t(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function o(e,n){if(null==e)return{};var r,s,t=function(e,n){if(null==e)return{};var r,s,t={},a=Object.keys(e);for(s=0;s<a.length;s++)r=a[s],n.indexOf(r)>=0||(t[r]=e[r]);return t}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)r=a[s],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(t[r]=e[r])}return t}var c=s.createContext({}),l=function(e){var n=s.useContext(c),r=n;return e&&(r="function"==typeof e?e(n):i(i({},n),e)),r},p=function(e){var n=l(e.components);return s.createElement(c.Provider,{value:n},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var n=e.children;return s.createElement(s.Fragment,{},n)}},g=s.forwardRef((function(e,n){var r=e.components,t=e.mdxType,a=e.originalType,c=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),u=l(r),g=t,d=u["".concat(c,".").concat(g)]||u[g]||m[g]||a;return r?s.createElement(d,i(i({ref:n},p),{},{components:r})):s.createElement(d,i({ref:n},p))}));function d(e,n){var r=arguments,t=n&&n.mdxType;if("string"==typeof e||t){var a=r.length,i=new Array(a);i[0]=g;var o={};for(var c in n)hasOwnProperty.call(n,c)&&(o[c]=n[c]);o.originalType=e,o[u]="string"==typeof e?e:t,i[1]=o;for(var l=2;l<a;l++)i[l]=r[l];return s.createElement.apply(null,i)}return s.createElement.apply(null,r)}g.displayName="MDXCreateElement"},15686:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>m,frontMatter:()=>a,metadata:()=>o,toc:()=>l});var s=r(87462),t=(r(67294),r(3905));const a={id:"Ingress",title:"Ingress"},i=void 0,o={unversionedId:"k8s/resources/Ingress",id:"k8s/resources/Ingress",title:"Ingress",description:"Provides a Kubernetes Ingress",source:"@site/docs/k8s/resources/Ingress.md",sourceDirName:"k8s/resources",slug:"/k8s/resources/Ingress",permalink:"/docs/k8s/resources/Ingress",draft:!1,tags:[],version:"current",frontMatter:{id:"Ingress",title:"Ingress"},sidebar:"docs",previous:{title:"Deployment",permalink:"/docs/k8s/resources/Deployment"},next:{title:"Namespace",permalink:"/docs/k8s/resources/Namespace"}},c={},l=[{value:"Examples",id:"examples",level:2},{value:"Create a Ingress for minikube",id:"create-a-ingress-for-minikube",level:3},{value:"Source Code Examples",id:"source-code-examples",level:2},{value:"Listing",id:"listing",level:2},{value:"Dependencies",id:"dependencies",level:2}],p={toc:l},u="wrapper";function m(e){let{components:n,...r}=e;return(0,t.kt)(u,(0,s.Z)({},p,r,{components:n,mdxType:"MDXLayout"}),(0,t.kt)("p",null,"Provides a ",(0,t.kt)("a",{parentName:"p",href:"https://kubernetes.io/docs/concepts/services-networking/ingress/"},"Kubernetes Ingress")),(0,t.kt)("h2",{id:"examples"},"Examples"),(0,t.kt)("h3",{id:"create-a-ingress-for-minikube"},"Create a Ingress for minikube"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-js"},'exports.createIngress = async ({\n  provider,\n  config: { restServer, ui },\n  resources: { namespace, serviceWebServer, serviceRestServer },\n}) => {\n  return provider.makeIngress({\n    dependencies: {\n      serviceWebServer,\n      serviceRestServer,\n    },\n    properties: () => ({\n      metadata: {\n        name: "ingress",\n        namespace: "myNamespace"\n        annotations: {\n          "nginx.ingress.kubernetes.io/use-regex": "true",\n        },\n      },\n      spec: {\n        rules: [\n          {\n            http: {\n              paths: [\n                {\n                  path: "/api/.*",\n                  pathType: "Prefix",\n                  backend: {\n                    service: {\n                      name: restServer.serviceName,\n                      port: {\n                        number: restServer.port,\n                      },\n                    },\n                  },\n                },\n              ],\n            },\n          },\n          {\n            http: {\n              paths: [\n                {\n                  path: "/.*",\n                  pathType: "Prefix",\n                  backend: {\n                    service: {\n                      name: ui.serviceName,\n                      port: {\n                        number: ui.port,\n                      },\n                    },\n                  },\n                },\n              ],\n            },\n          },\n        ],\n      },\n    }),\n  });\n')),(0,t.kt)("h2",{id:"source-code-examples"},"Source Code Examples"),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("a",{parentName:"li",href:"https://github.com/grucloud/grucloud/blob/main/examples/k8s/starhackit/minikube/ingress.js#L14"},"ingress on minikube")),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("a",{parentName:"li",href:"https://github.com/grucloud/grucloud/blob/main/examples/k8s/starhackit/eks-lbc/eksIngress.js#L15"},"ingress on EKS"))),(0,t.kt)("h2",{id:"listing"},"Listing"),(0,t.kt)("p",null,"The following command list only the ",(0,t.kt)("strong",{parentName:"p"},"Ingress")," type:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-sh"},"gc l -t Ingress\n")),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-sh"},'Listing resources on 2 providers: aws, k8s\n\u2713 aws\n  \u2713 Initialising\n  \u2713 Listing\n\u2713 k8s\n  \u2713 Initialising\n  \u2713 Listing 3/3\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 1 Ingress from k8s                                                                                        \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 Name     \u2502 Data                                                                                    \u2502 Our  \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 ingress  \u2502 metadata:                                                                               \u2502 Yes  \u2502\n\u2502          \u2502   name: ingress                                                                         \u2502      \u2502\n\u2502          \u2502   namespace: default                                                                    \u2502      \u2502\n\u2502          \u2502   selfLink: /apis/networking.k8s.io/v1beta1/namespaces/default/ingresses/ingress        \u2502      \u2502\n\u2502          \u2502   uid: 03fe436f-8ae8-4fbe-b592-917f18d296ad                                             \u2502      \u2502\n\u2502          \u2502   resourceVersion: 132466                                                               \u2502      \u2502\n\u2502          \u2502   generation: 1                                                                         \u2502      \u2502\n\u2502          \u2502   creationTimestamp: 2021-03-23T15:36:28Z                                               \u2502      \u2502\n\u2502          \u2502   annotations:                                                                          \u2502      \u2502\n\u2502          \u2502     CreatedByProvider: k8s                                                              \u2502      \u2502\n\u2502          \u2502     ManagedBy: GruCloud                                                                 \u2502      \u2502\n\u2502          \u2502     Name: ingress                                                                       \u2502      \u2502\n\u2502          \u2502     alb.ingress.kubernetes.io/certificate-arn: arn:aws:acm:eu-west-2:840541460064:cert\u2026 \u2502      \u2502\n\u2502          \u2502     alb.ingress.kubernetes.io/listen-ports: [{"HTTPS":443}, {"HTTP":80}]                \u2502      \u2502\n\u2502          \u2502     alb.ingress.kubernetes.io/scheme: internet-facing                                   \u2502      \u2502\n\u2502          \u2502     kubernetes.io/ingress.class: alb                                                    \u2502      \u2502\n\u2502          \u2502     stage: dev                                                                          \u2502      \u2502\n\u2502          \u2502   finalizers:                                                                           \u2502      \u2502\n\u2502          \u2502     - "ingress.k8s.aws/resources"                                                       \u2502      \u2502\n\u2502          \u2502 spec:                                                                                   \u2502      \u2502\n\u2502          \u2502   rules:                                                                                \u2502      \u2502\n\u2502          \u2502     - http:                                                                             \u2502      \u2502\n\u2502          \u2502         paths:                                                                          \u2502      \u2502\n\u2502          \u2502           - path: /api/*                                                                \u2502      \u2502\n\u2502          \u2502             pathType: Prefix                                                            \u2502      \u2502\n\u2502          \u2502             backend:                                                                    \u2502      \u2502\n\u2502          \u2502               serviceName: rest                                                         \u2502      \u2502\n\u2502          \u2502               servicePort: 9000                                                         \u2502      \u2502\n\u2502          \u2502     - http:                                                                             \u2502      \u2502\n\u2502          \u2502         paths:                                                                          \u2502      \u2502\n\u2502          \u2502           - path: /*                                                                    \u2502      \u2502\n\u2502          \u2502             pathType: Prefix                                                            \u2502      \u2502\n\u2502          \u2502             backend:                                                                    \u2502      \u2502\n\u2502          \u2502               serviceName: web                                                          \u2502      \u2502\n\u2502          \u2502               servicePort: 80                                                           \u2502      \u2502\n\u2502          \u2502 status:                                                                                 \u2502      \u2502\n\u2502          \u2502   loadBalancer:                                                                         \u2502      \u2502\n\u2502          \u2502     ingress:                                                                            \u2502      \u2502\n\u2502          \u2502       - hostname: k8s-default-ingress-e514cce9f1-51015254.eu-west-2.elb.amazonaws.com   \u2502      \u2502\n\u2502          \u2502                                                                                         \u2502      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n\nList Summary:\nProvider: k8s\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 k8s                                                                                                      \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 Ingress            \u2502 ingress                                                                             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n1 resource, 1 type, 2 providers\nCommand "gc l -t Ingress" executed in 4s\n')),(0,t.kt)("h2",{id:"dependencies"},"Dependencies"),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("a",{parentName:"li",href:"./Namespace"},"Namespace"))))}m.isMDXComponent=!0}}]);