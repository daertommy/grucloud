"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[19028],{3905:(e,n,a)=>{a.d(n,{Zo:()=>i,kt:()=>d});var t=a(67294);function r(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function o(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}function c(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?o(Object(a),!0).forEach((function(n){r(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function p(e,n){if(null==e)return{};var a,t,r=function(e,n){if(null==e)return{};var a,t,r={},o=Object.keys(e);for(t=0;t<o.length;t++)a=o[t],n.indexOf(a)>=0||(r[a]=e[a]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)a=o[t],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=t.createContext({}),l=function(e){var n=t.useContext(s),a=n;return e&&(a="function"==typeof e?e(n):c(c({},n),e)),a},i=function(e){var n=l(e.components);return t.createElement(s.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},m=t.forwardRef((function(e,n){var a=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,i=p(e,["components","mdxType","originalType","parentName"]),m=l(a),d=r,y=m["".concat(s,".").concat(d)]||m[d]||u[d]||o;return a?t.createElement(y,c(c({ref:n},i),{},{components:a})):t.createElement(y,c({ref:n},i))}));function d(e,n){var a=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=a.length,c=new Array(o);c[0]=m;var p={};for(var s in n)hasOwnProperty.call(n,s)&&(p[s]=n[s]);p.originalType=e,p.mdxType="string"==typeof e?e:r,c[1]=p;for(var l=2;l<o;l++)c[l]=a[l];return t.createElement.apply(null,c)}return t.createElement.apply(null,a)}m.displayName="MDXCreateElement"},89352:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>s,contentTitle:()=>c,default:()=>u,frontMatter:()=>o,metadata:()=>p,toc:()=>l});var t=a(87462),r=(a(67294),a(3905));const o={id:"DataSource",title:"DataSource"},c=void 0,p={unversionedId:"aws/resources/AppSync/DataSource",id:"aws/resources/AppSync/DataSource",title:"DataSource",description:"Manages an AppSync DataSource.",source:"@site/docs/aws/resources/AppSync/DataSource.md",sourceDirName:"aws/resources/AppSync",slug:"/aws/resources/AppSync/DataSource",permalink:"/docs/aws/resources/AppSync/DataSource",draft:!1,tags:[],version:"current",frontMatter:{id:"DataSource",title:"DataSource"},sidebar:"docs",previous:{title:"Service",permalink:"/docs/aws/resources/AppRunner/Service"},next:{title:"GraphqlApi",permalink:"/docs/aws/resources/AppSync/GraphqlApi"}},s={},l=[{value:"Sample code",id:"sample-code",level:2},{value:"Properties",id:"properties",level:2},{value:"Dependencies",id:"dependencies",level:2},{value:"Full Examples",id:"full-examples",level:2},{value:"List",id:"list",level:2}],i={toc:l};function u(e){let{components:n,...a}=e;return(0,r.kt)("wrapper",(0,t.Z)({},i,a,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Manages an ",(0,r.kt)("a",{parentName:"p",href:"https://console.aws.amazon.com/appsync/home?#/apis"},"AppSync DataSource"),"."),(0,r.kt)("h2",{id:"sample-code"},"Sample code"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'exports.createResources = () => [\n  {\n    type: "GraphqlApi",\n    group: "AppSync",\n    name: "cdk-notes-appsync-api",\n    properties: ({}) => ({\n      authenticationType: "API_KEY",\n      xrayEnabled: true,\n      apiKeys: [\n        {\n          description: "Graphql Api Keys",\n        },\n      ],\n      schemaFile: "cdk-notes-appsync-api.graphql",\n    }),\n  },\n  {\n    type: "DataSource",\n    group: "AppSync",\n    name: "lambdaDatasource",\n    properties: ({}) => ({\n      type: "AWS_LAMBDA",\n    }),\n    dependencies: () => ({\n      graphqlApi: "cdk-notes-appsync-api",\n      serviceRole:\n        "AppsyncCdkAppStack-ApilambdaDatasourceServiceRole2-1BX1MTO4H3KAG",\n      lambdaFunction: "lambda-fns",\n    }),\n  },\n  {\n    type: "Role",\n    group: "IAM",\n    name: "AppsyncCdkAppStack-ApilambdaDatasourceServiceRole2-1BX1MTO4H3KAG",\n    properties: ({ config }) => ({\n      Path: "/",\n      AssumeRolePolicyDocument: {\n        Version: "2012-10-17",\n        Statement: [\n          {\n            Effect: "Allow",\n            Principal: {\n              Service: "appsync.amazonaws.com",\n            },\n            Action: "sts:AssumeRole",\n          },\n        ],\n      },\n      Policies: [\n        {\n          PolicyDocument: {\n            Version: "2012-10-17",\n            Statement: [\n              {\n                Action: "lambda:InvokeFunction",\n                Resource: `arn:aws:lambda:${\n                  config.region\n                }:${config.accountId()}:function:lambda-fns`,\n                Effect: "Allow",\n              },\n            ],\n          },\n          PolicyName: "ApilambdaDatasourceServiceRoleDefaultPolicy3A97E34D",\n        },\n      ],\n    }),\n  },\n  {\n    type: "Role",\n    group: "IAM",\n    name: "AppsyncCdkAppStack-AppSyncNotesHandlerServiceRole3-V8HWDRIU57TV",\n    properties: ({ config }) => ({\n      Path: "/",\n      AssumeRolePolicyDocument: {\n        Version: "2012-10-17",\n        Statement: [\n          {\n            Effect: "Allow",\n            Principal: {\n              Service: "lambda.amazonaws.com",\n            },\n            Action: "sts:AssumeRole",\n          },\n        ],\n      },\n      Policies: [\n        {\n          PolicyDocument: {\n            Version: "2012-10-17",\n            Statement: [\n              {\n                Action: "dynamodb:*",\n                Resource: [\n                  `arn:aws:dynamodb:${\n                    config.region\n                  }:${config.accountId()}:table/AppsyncCdkAppStack-CDKNotesTable254A7FD1-1K1O8M7V6LS1R`,\n                ],\n                Effect: "Allow",\n              },\n            ],\n          },\n          PolicyName: "AppSyncNotesHandlerServiceRoleDefaultPolicy12C70C4F",\n        },\n      ],\n    }),\n    dependencies: () => ({\n      policies: ["AWSLambdaBasicExecutionRole"],\n    }),\n  },\n  {\n    type: "Policy",\n    group: "IAM",\n    name: "AWSLambdaBasicExecutionRole",\n    readOnly: true,\n    properties: ({}) => ({\n      Arn: "arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",\n    }),\n  },\n  {\n    type: "Function",\n    group: "Lambda",\n    name: "lambda-fns",\n    properties: ({}) => ({\n      Handler: "main.handler",\n      PackageType: "Zip",\n      Runtime: "nodejs12.x",\n      Description: "",\n      Timeout: 3,\n      MemorySize: 1024,\n      Environment: {\n        Variables: {\n          NOTES_TABLE: "AppsyncCdkAppStack-CDKNotesTable254A7FD1-1K1O8M7V6LS1R",\n        },\n      },\n    }),\n    dependencies: () => ({\n      role: "AppsyncCdkAppStack-AppSyncNotesHandlerServiceRole3-V8HWDRIU57TV",\n    }),\n  },\n];\n')),(0,r.kt)("h2",{id:"properties"},"Properties"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://docs.aws.amazon.com/AWSJavaScriptSDK/v3/latest/clients/client-appsync/interfaces/createdatasourcecommandinput.html"},"CreateDataSourceCommandInput"))),(0,r.kt)("h2",{id:"dependencies"},"Dependencies"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/docs/aws/resources/AppSync/GraphqlApi"},"GraphqlApi")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/docs/aws/resources/IAM/Role"},"Iam Role")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/docs/aws/resources/Lambda/Function"},"Lambda Function"))),(0,r.kt)("h2",{id:"full-examples"},"Full Examples"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/grucloud/grucloud/tree/main/examples/aws/AppSync/graphql"},"Simple example"))),(0,r.kt)("h2",{id:"list"},"List"),(0,r.kt)("p",null,"The DataSources can be filtered with the ",(0,r.kt)("em",{parentName:"p"},"DataSource")," type:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"gc l -t DataSource\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-txt"},'Listing resources on 1 provider: aws\n\u2713 aws\n  \u2713 Initialising\n  \u2713 Listing 6/6\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 1 AppSync::DataSource from aws                                                    \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 name: lambdaDatasource                                                            \u2502\n\u2502 managedByUs: Yes                                                                  \u2502\n\u2502 live:                                                                             \u2502\n\u2502   dataSourceArn: arn:aws:appsync:eu-west-2:840541460064:apis/2lufvsvnrrhajlz2suw\u2026 \u2502\n\u2502   name: lambdaDatasource                                                          \u2502\n\u2502   description: null                                                               \u2502\n\u2502   type: AWS_LAMBDA                                                                \u2502\n\u2502   serviceRoleArn: arn:aws:iam::840541460064:role/AppsyncCdkAppStack-ApilambdaDat\u2026 \u2502\n\u2502   lambdaConfig:                                                                   \u2502\n\u2502     lambdaFunctionArn: arn:aws:lambda:eu-west-2:840541460064:function:lambda-fns  \u2502\n\u2502   apiId: 2lufvsvnrrhajlz2suwx4nt6vy                                               \u2502\n\u2502   tags:                                                                           \u2502\n\u2502     gc-managed-by: grucloud                                                       \u2502\n\u2502     gc-project-name: aws-appsync-graphql                                          \u2502\n\u2502     gc-stage: dev                                                                 \u2502\n\u2502     gc-created-by-provider: aws                                                   \u2502\n\u2502     Name: cdk-notes-appsync-api                                                   \u2502\n\u2502     name: lambdaDatasource                                                        \u2502\n\u2502                                                                                   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n\nList Summary:\nProvider: aws\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 aws                                                                              \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 AppSync::DataSource \u2502 lambdaDatasource                                           \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n1 resource, 1 type, 1 provider\nCommand "gc l -t DataSource" executed in 13s\n')))}u.isMDXComponent=!0}}]);