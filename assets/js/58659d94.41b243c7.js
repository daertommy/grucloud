"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[26841],{3905:(e,a,n)=>{n.d(a,{Zo:()=>u,kt:()=>m});var r=n(67294);function t(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function l(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?l(Object(n),!0).forEach((function(a){t(e,a,n[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))}))}return e}function c(e,a){if(null==e)return{};var n,r,t=function(e,a){if(null==e)return{};var n,r,t={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],a.indexOf(n)>=0||(t[n]=e[n]);return t}(e,a);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(t[n]=e[n])}return t}var s=r.createContext({}),i=function(e){var a=r.useContext(s),n=a;return e&&(n="function"==typeof e?e(a):o(o({},a),e)),n},u=function(e){var a=i(e.components);return r.createElement(s.Provider,{value:a},e.children)},d={inlineCode:"code",wrapper:function(e){var a=e.children;return r.createElement(r.Fragment,{},a)}},p=r.forwardRef((function(e,a){var n=e.components,t=e.mdxType,l=e.originalType,s=e.parentName,u=c(e,["components","mdxType","originalType","parentName"]),p=i(n),m=t,g=p["".concat(s,".").concat(m)]||p[m]||d[m]||l;return n?r.createElement(g,o(o({ref:a},u),{},{components:n})):r.createElement(g,o({ref:a},u))}));function m(e,a){var n=arguments,t=a&&a.mdxType;if("string"==typeof e||t){var l=n.length,o=new Array(l);o[0]=p;var c={};for(var s in a)hasOwnProperty.call(a,s)&&(c[s]=a[s]);c.originalType=e,c.mdxType="string"==typeof e?e:t,o[1]=c;for(var i=2;i<l;i++)o[i]=n[i];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}p.displayName="MDXCreateElement"},67269:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>s,contentTitle:()=>o,default:()=>d,frontMatter:()=>l,metadata:()=>c,toc:()=>i});var r=n(87462),t=(n(67294),n(3905));const l={id:"LoadBalancer",title:"Load Balancer"},o=void 0,c={unversionedId:"aws/resources/ElasticLoadBalancingV2/LoadBalancer",id:"aws/resources/ElasticLoadBalancingV2/LoadBalancer",title:"Load Balancer",description:"Manage an AWS Load Balancer.",source:"@site/docs/aws/resources/ElasticLoadBalancingV2/LoadBalancer.md",sourceDirName:"aws/resources/ElasticLoadBalancingV2",slug:"/aws/resources/ElasticLoadBalancingV2/LoadBalancer",permalink:"/docs/aws/resources/ElasticLoadBalancingV2/LoadBalancer",draft:!1,tags:[],version:"current",frontMatter:{id:"LoadBalancer",title:"Load Balancer"},sidebar:"docs",previous:{title:"Listener",permalink:"/docs/aws/resources/ElasticLoadBalancingV2/Listener"},next:{title:"Rule",permalink:"/docs/aws/resources/ElasticLoadBalancingV2/Rule"}},s={},i=[{value:"Example:",id:"example",level:2},{value:"Load Balancer in a VPC",id:"load-balancer-in-a-vpc",level:3},{value:"Reference an existing Load Balancer",id:"reference-an-existing-load-balancer",level:3},{value:"Source Code",id:"source-code",level:2},{value:"Properties",id:"properties",level:2},{value:"Dependencies",id:"dependencies",level:2},{value:"Used By",id:"used-by",level:2},{value:"List",id:"list",level:2}],u={toc:i};function d(e){let{components:a,...n}=e;return(0,t.kt)("wrapper",(0,r.Z)({},u,n,{components:a,mdxType:"MDXLayout"}),(0,t.kt)("p",null,"Manage an ",(0,t.kt)("a",{parentName:"p",href:"https://console.aws.amazon.com/ec2/v2/home?#LoadBalancers:"},"AWS Load Balancer"),"."),(0,t.kt)("h2",{id:"example"},"Example:"),(0,t.kt)("h3",{id:"load-balancer-in-a-vpc"},"Load Balancer in a VPC"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-js"},'exports.createResources = () => [\n  {\n    type: "LoadBalancer",\n    group: "ElasticLoadBalancingV2",\n    properties: ({}) => ({\n      Name: "load-balancer",\n      Scheme: "internet-facing",\n      Type: "application",\n      IpAddressType: "ipv4",\n    }),\n    dependencies: () => ({\n      subnets: ["SubnetPublicUSEAST1D", "SubnetPublicUSEAST1F"],\n      securityGroups: ["load-balancer"],\n    }),\n  },\n];\n')),(0,t.kt)("h3",{id:"reference-an-existing-load-balancer"},"Reference an existing Load Balancer"),(0,t.kt)("p",null,"When using the ",(0,t.kt)("em",{parentName:"p"},"AWS Load Balancer Controller")," to create the load balancer & associated resources, there is the need to get a reference to this load balancer."),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-js"},'const clusterName = "cluster";\n\nexports.createResources = () => [\n  {\n    type: "LoadBalancer",\n    group: "ElasticLoadBalancingV2",\n    name: "load-balancer",\n    readOnly: true,\n    filterLives: ({ resources }) =>\n      pipe([\n        () => resources,\n        find(\n          pipe([\n            get("live.Tags"),\n            find(\n              and([\n                eq(get("Key"), "elbv2.k8s.aws/cluster"),\n                eq(get("Value"), clusterName),\n              ])\n            ),\n          ])\n        ),\n      ])(),\n  },\n];\n')),(0,t.kt)("h2",{id:"source-code"},"Source Code"),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("a",{parentName:"li",href:"https://github.com/grucloud/grucloud/blob/main/examples/aws/ElasticLoadBalancingV2/load-balancer"},"Load Balancer simple")),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("a",{parentName:"li",href:"https://github.com/grucloud/grucloud/blob/main/examples/aws/CodeDeploy/codedeploy-ecs"},"code deploy ecs")),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("a",{parentName:"li",href:"https://github.com/grucloud/grucloud/blob/main/examples/aws/EKS/eks-load-balancer"},"EKS with load balancer")),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("a",{parentName:"li",href:"https://github.com/grucloud/grucloud/blob/main/examples/aws/Route53/routing-failover-policy"},"Route53 failover policy")),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("a",{parentName:"li",href:"https://github.com/grucloud/grucloud/blob/main/examples/aws/serverless-patterns/apigw-fargate-cdk"},"serverless-patterns apigw-fargate-cdk")),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("a",{parentName:"li",href:"https://github.com/grucloud/grucloud/blob/main/examples/aws/serverless-patterns/apigw-vpclink-pvt-alb"},"serverless-patterns apigw-vpclink-pvt-alb")),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("a",{parentName:"li",href:"https://github.com/grucloud/grucloud/blob/main/examples/aws/serverless-patterns/fargate-aurora-serverless-cdk"},"serverless-patterns fargate-aurora-serverless-cdk")),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("a",{parentName:"li",href:"https://github.com/grucloud/grucloud/blob/main/examples/aws/serverless-patterns/fargate-eventbridge"},"serverless-patterns fargate-eventbridge")),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("a",{parentName:"li",href:"https://github.com/grucloud/grucloud/blob/main/examples/aws/WAFv2/wafv2-loadbalancer"},"wafv2-loadbalancer"))),(0,t.kt)("h2",{id:"properties"},"Properties"),(0,t.kt)("p",null,"The list of properties are defined in ",(0,t.kt)("a",{parentName:"p",href:"https://docs.aws.amazon.com/AWSJavaScriptSDK/v3/latest/clients/client-elastic-load-balancing-v2/interfaces/createloadbalancercommandinput.html"},"CreateLoadBalancerCommandInput")),(0,t.kt)("h2",{id:"dependencies"},"Dependencies"),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("a",{parentName:"li",href:"/docs/aws/resources/EC2/Subnet"},"Subnet")),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("a",{parentName:"li",href:"/docs/aws/resources/EC2/SecurityGroup"},"SecurityGroup"))),(0,t.kt)("h2",{id:"used-by"},"Used By"),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("a",{parentName:"li",href:"/docs/aws/resources/GlobalAccelerator/EndpointGroup"},"GlobalAccelerator Endpoint Group")),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("a",{parentName:"li",href:"/docs/aws/resources/Route53/Record"},"Route53 Record"))),(0,t.kt)("h2",{id:"list"},"List"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-sh"},"gc l -t LoadBalancer\n")),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-sh"},'Listing resources on 1 provider: aws\n\u2713 aws\n  \u2713 Initialising\n  \u2713 Listing 5/5\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 1 ElasticLoadBalancingV2::LoadBalancer from aws                                              \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 name: load-balancer                                                         \u2502\n\u2502 managedByUs: Yes                                                            \u2502\n\u2502 live:                                                                       \u2502\n\u2502   LoadBalancerArn: arn:aws:elasticloadbalancing:us-east-1:123456789123:loa\u2026 \u2502\n\u2502   DNSName: load-balancer-742239368.us-east-1.elb.amazonaws.com              \u2502\n\u2502   CanonicalHostedZoneId: Z35SXDOTRQ7X7K                                     \u2502\n\u2502   CreatedTime: 2021-10-29T17:13:03.430Z                                     \u2502\n\u2502   LoadBalancerName: load-balancer                                           \u2502\n\u2502   Scheme: internet-facing                                                   \u2502\n\u2502   VpcId: vpc-055bc1b8bdcbd18ac                                              \u2502\n\u2502   State:                                                                    \u2502\n\u2502     Code: active                                                            \u2502\n\u2502   Type: application                                                         \u2502\n\u2502   AvailabilityZones:                                                        \u2502\n\u2502     - ZoneName: us-east-1a                                                  \u2502\n\u2502       SubnetId: subnet-05ee2729854925587                                    \u2502\n\u2502       LoadBalancerAddresses: []                                             \u2502\n\u2502     - ZoneName: us-east-1b                                                  \u2502\n\u2502       SubnetId: subnet-0ec0f9a0cec61d35b                                    \u2502\n\u2502       LoadBalancerAddresses: []                                             \u2502\n\u2502   SecurityGroups:                                                           \u2502\n\u2502     - "sg-0111f30f176535b9d"                                                \u2502\n\u2502   IpAddressType: ipv4                                                       \u2502\n\u2502   Tags:                                                                     \u2502\n\u2502     - Key: gc-created-by-provider                                           \u2502\n\u2502       Value: aws                                                            \u2502\n\u2502     - Key: gc-managed-by                                                    \u2502\n\u2502       Value: grucloud                                                       \u2502\n\u2502     - Key: gc-project-name                                                  \u2502\n\u2502       Value: @grucloud/example-aws-elbv2-loadbalancer                       \u2502\n\u2502     - Key: gc-stage                                                         \u2502\n\u2502       Value: dev                                                            \u2502\n\u2502     - Key: Name                                                             \u2502\n\u2502       Value: load-balancer                                                  \u2502\n\u2502                                                                             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n\nList Summary:\nProvider: aws\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 aws                                                                        \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 ElasticLoadBalancingV2::LoadBalancer \u2502 load-balancer                                        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n1 resource, 1 type, 1 provider\nCommand "gc l -t LoadBalancer" executed in 6s\n')))}d.isMDXComponent=!0}}]);