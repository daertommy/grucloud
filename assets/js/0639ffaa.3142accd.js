"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[69160],{3905:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>d});var a=t(67294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)t=s[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)t=s[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var l=a.createContext({}),c=function(e){var n=a.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},p=function(e){var n=c(e.components);return a.createElement(l.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},m=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,s=e.originalType,l=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),m=c(t),d=r,g=m["".concat(l,".").concat(d)]||m[d]||u[d]||s;return t?a.createElement(g,i(i({ref:n},p),{},{components:t})):a.createElement(g,i({ref:n},p))}));function d(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var s=t.length,i=new Array(s);i[0]=m;var o={};for(var l in n)hasOwnProperty.call(n,l)&&(o[l]=n[l]);o.originalType=e,o.mdxType="string"==typeof e?e:r,i[1]=o;for(var c=2;c<s;c++)i[c]=t[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,t)}m.displayName="MDXCreateElement"},85103:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>s,metadata:()=>o,toc:()=>c});var a=t(87462),r=(t(67294),t(3905));const s={id:"TaskDefinition",title:"Task Definition"},i=void 0,o={unversionedId:"aws/resources/ECS/TaskDefinition",id:"aws/resources/ECS/TaskDefinition",title:"Task Definition",description:"Manages an ECS Task Definition.",source:"@site/docs/aws/resources/ECS/TaskDefinition.md",sourceDirName:"aws/resources/ECS",slug:"/aws/resources/ECS/TaskDefinition",permalink:"/docs/aws/resources/ECS/TaskDefinition",draft:!1,tags:[],version:"current",frontMatter:{id:"TaskDefinition",title:"Task Definition"},sidebar:"docs",previous:{title:"Task",permalink:"/docs/aws/resources/ECS/Task"},next:{title:"Task Set",permalink:"/docs/aws/resources/ECS/TaskSet"}},l={},c=[{value:"Sample code",id:"sample-code",level:2},{value:"Properties",id:"properties",level:2},{value:"Dependencies",id:"dependencies",level:2},{value:"Used By",id:"used-by",level:2},{value:"Full Examples",id:"full-examples",level:2},{value:"List",id:"list",level:2}],p={toc:c};function u(e){let{components:n,...t}=e;return(0,r.kt)("wrapper",(0,a.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Manages an ",(0,r.kt)("a",{parentName:"p",href:"https://console.aws.amazon.com/ecs/home?#/taskDefinitions"},"ECS Task Definition"),"."),(0,r.kt)("h2",{id:"sample-code"},"Sample code"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'exports.createResources = () => [\n  {\n    type: "TaskDefinition",\n    group: "ECS",\n    properties: ({ config }) => ({\n      containerDefinitions: [\n        {\n          command: [],\n          cpu: 0,\n          dnsSearchDomains: [],\n          dnsServers: [],\n          dockerLabels: {},\n          dockerSecurityOptions: [],\n          entryPoint: [],\n          environment: [],\n          environmentFiles: [],\n          essential: true,\n          extraHosts: [],\n          image: "amazon/amazon-ecs-sample",\n          links: [],\n          logConfiguration: {\n            logDriver: "awslogs",\n            options: {\n              "awslogs-group":\n                "ECSServiceStack-amazonecssampleTaskDefwebLogGroup910AB31A-Aka75VsMnKfI",\n              "awslogs-region": `${config.region}`,\n              "awslogs-stream-prefix": "ECSServiceStack",\n            },\n            secretOptions: [],\n          },\n          mountPoints: [],\n          name: "web",\n          portMappings: [\n            {\n              containerPort: 80,\n              hostPort: 80,\n              protocol: "tcp",\n            },\n          ],\n          secrets: [],\n          systemControls: [],\n          ulimits: [],\n          volumesFrom: [],\n        },\n      ],\n      cpu: "512",\n      family: "ECSServiceStackamazonecssampleTaskDef499685C5",\n      memory: "1024",\n      networkMode: "awsvpc",\n      requiresAttributes: [\n        {\n          name: "com.amazonaws.ecs.capability.logging-driver.awslogs",\n        },\n        {\n          name: "ecs.capability.execution-role-awslogs",\n        },\n        {\n          name: "com.amazonaws.ecs.capability.docker-remote-api.1.19",\n        },\n        {\n          name: "com.amazonaws.ecs.capability.docker-remote-api.1.17",\n        },\n        {\n          name: "com.amazonaws.ecs.capability.task-iam-role",\n        },\n        {\n          name: "com.amazonaws.ecs.capability.docker-remote-api.1.18",\n        },\n        {\n          name: "ecs.capability.task-eni",\n        },\n      ],\n      requiresCompatibilities: ["FARGATE"],\n    }),\n    dependencies: ({}) => ({\n      taskRole:\n        "ECSServiceStack-amazonecssampleTaskDefTaskRole527D-1JLMLL2357T0V",\n      executionRole:\n        "ECSServiceStack-amazonecssampleTaskDefExecutionRol-1391KZSJLULK2",\n    }),\n  },\n];\n')),(0,r.kt)("h2",{id:"properties"},"Properties"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://docs.aws.amazon.com/AWSJavaScriptSDK/v3/latest/clients/client-ecs/interfaces/registertaskdefinitioncommandinput.html"},"RegisterTaskDefinitionCommandInput"))),(0,r.kt)("h2",{id:"dependencies"},"Dependencies"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/docs/aws/resources/IAM/Role"},"IAM Role")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/docs/aws/resources/RDS/DBCluster"},"RDS DBCluster")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/docs/aws/resources/SecretsManager/Secret"},"SecretsManager Secret"))),(0,r.kt)("h2",{id:"used-by"},"Used By"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/docs/aws/resources/ECS/Service"},"ECS Service")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/docs/aws/resources/ECS/TaskSet"},"ECS TaskSet"))),(0,r.kt)("h2",{id:"full-examples"},"Full Examples"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"https://github.com/grucloud/grucloud/tree/main/examples/aws/ECS/ecs-simple"},"Simple example"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"[aws-cdk-examples/application-load-balancer-fargate-service]","((",(0,r.kt)("a",{parentName:"p",href:"https://github.com/grucloud/grucloud/tree/main/examples/aws/aws-cdk-examples/application-load-balancer-fargate-service"},"https://github.com/grucloud/grucloud/tree/main/examples/aws/aws-cdk-examples/application-load-balancer-fargate-service"),")")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"[serverless-patterns/apigw-fargate-cdk]","((",(0,r.kt)("a",{parentName:"p",href:"https://github.com/grucloud/grucloud/tree/main/examples/aws/serverless-patterns/apigw-fargate-cdk"},"https://github.com/grucloud/grucloud/tree/main/examples/aws/serverless-patterns/apigw-fargate-cdk"),")")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"[serverless-patterns/apigw-vpclink-pvt-alb]","((",(0,r.kt)("a",{parentName:"p",href:"https://github.com/grucloud/grucloud/tree/main/examples/aws/serverless-patterns/apigw-vpclink-pvt-alb"},"https://github.com/grucloud/grucloud/tree/main/examples/aws/serverless-patterns/apigw-vpclink-pvt-alb"),")")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"[serverless-patterns/fargate-aurora-serverless-cdk]","((",(0,r.kt)("a",{parentName:"p",href:"https://github.com/grucloud/grucloud/tree/main/examples/aws/serverless-patterns/fargate-aurora-serverless-cdk"},"https://github.com/grucloud/grucloud/tree/main/examples/aws/serverless-patterns/fargate-aurora-serverless-cdk"),")")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"[serverless-patterns/fargate-eventbridge]","((",(0,r.kt)("a",{parentName:"p",href:"https://github.com/grucloud/grucloud/tree/main/examples/aws/serverless-patterns/fargate-eventbridge"},"https://github.com/grucloud/grucloud/tree/main/examples/aws/serverless-patterns/fargate-eventbridge"),")"))),(0,r.kt)("h2",{id:"list"},"List"),(0,r.kt)("p",null,"The ECS services can be filtered with the ",(0,r.kt)("em",{parentName:"p"},"TaskDefinition")," type:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"gc l -t TaskDefinition\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-txt"},'Listing resources on 1 provider: aws\n\u2713 aws\n  \u2713 Initialising\n  \u2713 Listing 3/3\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 1 ECS::TaskDefinition from aws                                                \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 name: nginx                                                                   \u2502\n\u2502 managedByUs: Yes                                                              \u2502\n\u2502 live:                                                                         \u2502\n\u2502   taskDefinitionArn: arn:aws:ecs:eu-west-2:840541460064:task-definition/ngin\u2026 \u2502\n\u2502   containerDefinitions:                                                       \u2502\n\u2502     - name: nginx                                                             \u2502\n\u2502       image: nginx                                                            \u2502\n\u2502       cpu: 0                                                                  \u2502\n\u2502       memory: 512                                                             \u2502\n\u2502       portMappings:                                                           \u2502\n\u2502         - containerPort: 80                                                   \u2502\n\u2502           hostPort: 80                                                        \u2502\n\u2502           protocol: tcp                                                       \u2502\n\u2502       essential: true                                                         \u2502\n\u2502       environment: []                                                         \u2502\n\u2502       mountPoints: []                                                         \u2502\n\u2502       volumesFrom: []                                                         \u2502\n\u2502   family: nginx                                                               \u2502\n\u2502   revision: 47                                                                \u2502\n\u2502   volumes: []                                                                 \u2502\n\u2502   status: ACTIVE                                                              \u2502\n\u2502   placementConstraints: []                                                    \u2502\n\u2502   compatibilities:                                                            \u2502\n\u2502     - "EXTERNAL"                                                              \u2502\n\u2502     - "EC2"                                                                   \u2502\n\u2502   requiresCompatibilities:                                                    \u2502\n\u2502     - "EC2"                                                                   \u2502\n\u2502   registeredAt: 2021-09-03T13:40:50.297Z                                      \u2502\n\u2502   registeredBy: arn:aws:iam::840541460064:root                                \u2502\n\u2502   tags:                                                                       \u2502\n\u2502     - key: gc-created-by-provider                                             \u2502\n\u2502       value: aws                                                              \u2502\n\u2502     - key: gc-managed-by                                                      \u2502\n\u2502       value: grucloud                                                         \u2502\n\u2502     - key: gc-project-name                                                    \u2502\n\u2502       value: example-grucloud-ecs-simple                                      \u2502\n\u2502     - key: gc-stage                                                           \u2502\n\u2502       value: dev                                                              \u2502\n\u2502     - key: Name                                                               \u2502\n\u2502       value: nginx                                                            \u2502\n\u2502                                                                               \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n\nList Summary:\nProvider: aws\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 aws                                                                      \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 ECS::TaskDefinition            \u2502 nginx                                   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n1 resource, 1 type, 1 provider\nCommand "gc l -t TaskDefinition" executed in 6s\n')))}u.isMDXComponent=!0}}]);