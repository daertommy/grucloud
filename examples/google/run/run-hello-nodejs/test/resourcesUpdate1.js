// Generated by 'gc gencode'
const { pipe, tap, get, eq, and } = require("rubico");
const { find } = require("rubico/x");

const createResources = ({ provider }) => {
  provider.run.makeService({
    name: "starhackit-server",
    properties: ({ config }) => ({
      apiVersion: "serving.knative.dev/v1",
      kind: "Service",
      metadata: {
        name: "starhackit-server",
        labels: {
          "cloud.googleapis.com/location": "us-central1",
        },
      },
      spec: {
        template: {
          metadata: {
            name: "starhackit-server-00006-rud",
            annotations: {
              "run.googleapis.com/client-name": "cloud-console",
              "run.googleapis.com/execution-environment": "gen1",
              "autoscaling.knative.dev/maxScale": "100",
            },
          },
          spec: {
            containerConcurrency: 90,
            timeoutSeconds: 300,
            serviceAccountName: `${config.projectNumber()}-compute@developer.gserviceaccount.com`,
            containers: [
              {
                image:
                  "gcr.io/grucloud-test/github.com/fredericheem/starhackit@sha256:f0c4de568cf04ec5a4588a471aff9992c5cbf68afbcc17edae8912a8de7af77a",
                resources: {
                  limits: {
                    cpu: "2000m",
                    memory: "512Mi",
                  },
                },
                ports: [
                  {
                    name: "http1",
                    containerPort: 8080,
                  },
                ],
              },
            ],
          },
        },
        traffic: [
          {
            percent: 100,
            latestRevision: true,
          },
        ],
      },
    }),
  });
};

exports.createResources = createResources;
