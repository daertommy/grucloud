// Generated by k8s-manifest2code from aspnetapp.yaml
const assert = require("assert");
exports.createResources = ({ provider }) => {
  const aspnetappPod = provider.makePod({
    properties: () => ({
      apiVersion: "v1",
      metadata: {
        name: "aspnetapp",
        labels: {
          app: "aspnetapp",
        },
      },
      spec: {
        containers: [
          {
            image: "mcr.microsoft.com/dotnet/core/samples:aspnetapp",
            name: "aspnetapp-image",
            ports: [
              {
                containerPort: 80,
                protocol: "TCP",
              },
            ],
          },
        ],
      },
    }),
  });

  const aspnetappService = provider.makeService({
    properties: () => ({
      apiVersion: "v1",
      metadata: {
        name: "aspnetapp",
      },
      spec: {
        selector: {
          app: "aspnetapp",
        },
        ports: [
          {
            protocol: "TCP",
            port: 80,
            targetPort: 80,
          },
        ],
      },
    }),
  });

  const aspnetappIngress = provider.makeIngress({
    properties: () => ({
      apiVersion: "networking.k8s.io/v1",
      metadata: {
        name: "aspnetapp",
        annotations: {
          "kubernetes.io/ingress.class": "azure/application-gateway",
        },
      },
      spec: {
        rules: [
          {
            http: {
              paths: [
                {
                  path: "/",
                  backend: {
                    service: {
                      name: "aspnetapp",
                      port: {
                        number: 80,
                      },
                    },
                  },
                  pathType: "Exact",
                },
              ],
            },
          },
        ],
      },
    }),
  });

  return {
    aspnetappPod,
    aspnetappService,
    aspnetappIngress,
  };
};
