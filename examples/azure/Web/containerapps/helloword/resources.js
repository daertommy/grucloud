// Generated by 'gc gencode'
const {} = require("rubico");
const {} = require("rubico/x");

exports.createResources = () => [
  {
    type: "ContainerApp",
    group: "App",
    properties: ({}) => ({
      name: "helloworld",
      identity: {
        type: "None",
      },
      properties: {
        configuration: {
          activeRevisionsMode: "Single",
          ingress: {
            external: true,
            targetPort: 80,
            transport: "Auto",
            traffic: [
              {
                weight: 100,
                latestRevision: true,
              },
            ],
            allowInsecure: false,
          },
          registries: [],
        },
        template: {
          containers: [
            {
              image:
                "mcr.microsoft.com/azuredocs/containerapps-helloworld:latest",
              name: "simple-hello-world-container",
              command: [],
              resources: {
                cpu: 0.25,
                memory: "0.5Gi",
              },
            },
          ],
          scale: {
            maxReplicas: 10,
          },
        },
      },
    }),
    dependencies: ({}) => ({
      resourceGroup: "rg-app-helloworld",
      managedEnvironment: "rg-app-helloworld::dev",
    }),
  },
  {
    type: "ManagedEnvironment",
    group: "App",
    properties: ({}) => ({
      name: "dev",
      properties: {
        appLogsConfiguration: {
          destination: "log-analytics",
          logAnalyticsConfiguration: {
            sharedKey: process.env.RG_APP_HELLOWORLD_DEV_SHARED_KEY,
          },
        },
        zoneRedundant: false,
        daprAIInstrumentationKey:
          process.env.RG_APP_HELLOWORLD_DEV_DAPR_AI_INSTRUMENTATION_KEY,
        daprAIConnectionString:
          process.env.RG_APP_HELLOWORLD_DEV_DAPR_AI_CONNECTION_STRING,
      },
    }),
    dependencies: ({}) => ({
      resourceGroup: "rg-app-helloworld",
    }),
  },
  {
    type: "Workspace",
    group: "OperationalInsights",
    properties: ({}) => ({
      name: "workspacergapphelloworld9e98",
      properties: {
        sku: {
          name: "PerGB2018",
        },
        retentionInDays: 30,
      },
    }),
    dependencies: ({}) => ({
      resourceGroup: "rg-app-helloworld",
    }),
  },
  {
    type: "ResourceGroup",
    group: "Resources",
    properties: ({}) => ({
      name: "rg-app-helloworld",
    }),
  },
];
