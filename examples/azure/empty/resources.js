// Generated by 'gc gencode'
const {} = require("rubico");
const {} = require("rubico/x");

exports.createResources = () => [
  {
    type: "SshPublicKey",
    group: "Compute",
    properties: ({}) => ({
      name: "mykeypair",
      location: "uksouth",
      properties: {
        publicKey:
          "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDLpcQerEi6H9mss/GvTz5whNjruxj4DiPhdQLYHncd/EGyP+EnlMIKD2nJPVdiXMbaiwBURPZW4ssVNTvhRMX8P4YzVnNM8wSM93c2yjUxOLZ0OmCv30lsopgQCM5TgqElr15xQsGZ6FHrS0Oo+GadQL/zg18xrHc/ZHgxvZIF3bz7OamO88n7mQU8vv4YppFr0IS5nduW7jNHbhe7vofZw796rOHlSg1GZU9//5fQR5RXkZO9bXeYNU/DJ8qMj8wVnY5e5dumKRd/1ifaQOmZuHDH/umFa9CbWvk7TLXMUkXT4C/HvNVT9WGi44xl86h1cvuawoJ6CQihDI1CSTvQxJ9RTGd+feJKtdXVOdPDZ1fIrKrGA38t52fcaP1Cw0aQ1SXMLlL+tS/h7NTVcwDhF3ICkyHjNNPwLKbAZVq4FelwFoA7H0BhRS8evj8BCIgRcJ8UQKunh2t47wswxdHd76qTav+smAg0heIKmNs7HgWP0megNWSP0fvW2mO+x8U= generated-by-azure",
      },
    }),
    dependencies: ({}) => ({
      resourceGroup: "rg-vm",
    }),
  },
  {
    type: "Key",
    group: "KeyVault",
    properties: ({}) => ({
      name: "mykey",
      properties: {
        attributes: {
          enabled: true,
          exportable: false,
        },
        kty: "RSA",
      },
    }),
    dependencies: ({}) => ({
      resourceGroup: "rg-vault-rbac",
      vault: "rg-vault-rbac::gc-vault-rbac",
    }),
  },
  {
    type: "Key",
    group: "KeyVault",
    properties: ({}) => ({
      name: "mykey1",
      properties: {
        attributes: {
          enabled: true,
          exportable: false,
        },
        kty: "RSA",
      },
    }),
    dependencies: ({}) => ({
      resourceGroup: "rg-vault-rbac",
      vault: "rg-vault-rbac::gc-vault-rbac",
    }),
  },
  {
    type: "Vault",
    group: "KeyVault",
    properties: ({ config }) => ({
      name: "gc-vault-rbac",
      properties: {
        sku: {
          family: "A",
          name: "standard",
        },
        enabledForDeployment: false,
        enableRbacAuthorization: true,
        publicNetworkAccess: "Enabled",
        tenantId: `${config.tenantId}`,
        accessPolicies: undefined,
      },
    }),
    dependencies: ({}) => ({
      resourceGroup: "rg-vault-rbac",
    }),
  },
  {
    type: "NetworkSecurityGroup",
    group: "Network",
    properties: ({}) => ({
      name: "security-group",
      properties: {
        securityRules: [
          {
            name: "SSH",
            properties: {
              description: "allow SSH",
              protocol: "Tcp",
              sourcePortRange: "*",
              destinationPortRange: "22",
              sourceAddressPrefix: "*",
              destinationAddressPrefix: "*",
              access: "Allow",
              priority: 1000,
              direction: "Inbound",
              sourcePortRanges: [],
              destinationPortRanges: [],
              sourceAddressPrefixes: [],
              destinationAddressPrefixes: [],
            },
          },
          {
            name: "ICMP",
            properties: {
              description: "allow ICMP",
              protocol: "Icmp",
              sourcePortRange: "*",
              destinationPortRange: "*",
              sourceAddressPrefix: "*",
              destinationAddressPrefix: "*",
              access: "Allow",
              priority: 1001,
              direction: "Inbound",
              sourcePortRanges: [],
              destinationPortRanges: [],
              sourceAddressPrefixes: [],
              destinationAddressPrefixes: [],
            },
          },
        ],
      },
    }),
    dependencies: ({}) => ({
      resourceGroup: "rg-vm",
    }),
  },
  {
    type: "PublicIPAddress",
    group: "Network",
    properties: ({}) => ({
      name: "ip-address",
    }),
    dependencies: ({}) => ({
      resourceGroup: "rg-vm",
    }),
  },
  {
    type: "Subnet",
    group: "Network",
    properties: ({}) => ({
      name: "subnet",
      properties: {
        addressPrefix: "10.0.0.0/24",
      },
    }),
    dependencies: ({}) => ({
      resourceGroup: "rg-vm",
      virtualNetwork: "rg-vm::virtual-network",
    }),
  },
  {
    type: "VirtualNetwork",
    group: "Network",
    properties: ({}) => ({
      name: "virtual-network",
      properties: {
        addressSpace: {
          addressPrefixes: ["10.0.0.0/16"],
        },
      },
    }),
    dependencies: ({}) => ({
      resourceGroup: "rg-vm",
    }),
  },
  {
    type: "ResourceGroup",
    group: "Resources",
    properties: ({}) => ({
      name: "rg-vault-rbac",
    }),
  },
  {
    type: "ResourceGroup",
    group: "Resources",
    properties: ({}) => ({
      name: "rg-vm",
    }),
  },
];
