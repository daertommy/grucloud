// Generated by 'gc gencode'
const { pipe, tap, get, eq, and } = require("rubico");
const { find } = require("rubico/x");

const createResources = ({ provider }) => {
  provider.DBforPostgreSQL.makeFirewallRule({
    name: "AllowAllAzureServicesAndResourcesWithinAzureIps_2021-12-15_11-18-53",
    properties: ({ config }) => ({
      properties: {
        startIpAddress: "0.0.0.0",
        endIpAddress: "0.0.0.0",
      },
    }),
    dependencies: ({ resources }) => ({
      resourceGroup: resources.Resources.ResourceGroup["rg-postgres"],
      server: resources.DBforPostgreSQL.Server["db-grucloud-test"],
    }),
  });

  provider.DBforPostgreSQL.makeServer({
    name: "db-grucloud-test",
    properties: ({ config }) => ({
      sku: {
        name: "Standard_B1ms",
        tier: "Burstable",
      },
      properties: {
        version: "13",
        storage: {
          storageSizeGB: 32,
        },
        administratorLoginPassword:
          process.env.DB_GRUCLOUD_TEST_ADMINISTRATOR_LOGIN_PASSWORD,
      },
    }),
    dependencies: ({ resources }) => ({
      resourceGroup: resources.Resources.ResourceGroup["rg-postgres"],
    }),
  });

  provider.Resources.makeResourceGroup({
    name: "rg-postgres",
  });
};

exports.createResources = createResources;
