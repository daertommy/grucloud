// Generated by 'gc gencode'
const {} = require("rubico");
const {} = require("rubico/x");

exports.createResources = () => [
  {
    type: "CompositeAlarm",
    group: "CloudWatch",
    properties: ({ config }) => ({
      AlarmActions: [
        `arn:aws:sns:${
          config.region
        }:${config.accountId()}:CloudWatchAlarmsforCloudTrailAPIActivity-AlarmNotificationTopic-VE1Pu0SWau90`,
      ],
      AlarmName: "my-composite",
      AlarmRule: `ALARM("CloudTrailAuthorizationFailures") OR 
ALARM("CloudTrailConsoleSignInFailures")`,
    }),
    dependencies: ({}) => ({
      snsTopicAlarmActions:
        "CloudWatchAlarmsforCloudTrailAPIActivity-AlarmNotificationTopic-VE1Pu0SWau90",
    }),
  },
  {
    type: "MetricAlarm",
    group: "CloudWatch",
    properties: ({ config }) => ({
      AlarmActions: [
        `arn:aws:sns:${
          config.region
        }:${config.accountId()}:CloudWatchAlarmsforCloudTrailAPIActivity-AlarmNotificationTopic-VE1Pu0SWau90`,
      ],
      AlarmDescription: "Alarms when an unauthorized API call is made.",
      AlarmName: "CloudTrailAuthorizationFailures",
      ComparisonOperator: "GreaterThanOrEqualToThreshold",
      EvaluationPeriods: 1,
      MetricName: "AuthorizationFailureCount",
      Namespace: "CloudTrailMetrics",
      Period: 300,
      Statistic: "Sum",
      Threshold: 1,
    }),
    dependencies: ({}) => ({
      snsTopicAlarmActions:
        "CloudWatchAlarmsforCloudTrailAPIActivity-AlarmNotificationTopic-VE1Pu0SWau90",
    }),
  },
  {
    type: "MetricAlarm",
    group: "CloudWatch",
    properties: ({ config }) => ({
      AlarmActions: [
        `arn:aws:sns:${
          config.region
        }:${config.accountId()}:CloudWatchAlarmsforCloudTrailAPIActivity-AlarmNotificationTopic-VE1Pu0SWau90`,
      ],
      AlarmDescription:
        "Alarms when an unauthenticated API call is made to sign into the console.",
      AlarmName: "CloudTrailConsoleSignInFailures",
      ComparisonOperator: "GreaterThanOrEqualToThreshold",
      EvaluationPeriods: 1,
      MetricName: "ConsoleSignInFailureCount",
      Namespace: "CloudTrailMetrics",
      Period: 300,
      Statistic: "Sum",
      Threshold: 3,
    }),
    dependencies: ({}) => ({
      snsTopicAlarmActions:
        "CloudWatchAlarmsforCloudTrailAPIActivity-AlarmNotificationTopic-VE1Pu0SWau90",
    }),
  },
  {
    type: "LogGroup",
    group: "CloudWatchLogs",
    properties: ({}) => ({
      logGroupName: "CloudTrail/DefaultLogGroup",
    }),
  },
  {
    type: "Topic",
    group: "SNS",
    name: "CloudWatchAlarmsforCloudTrailAPIActivity-AlarmNotificationTopic-VE1Pu0SWau90",
  },
];
