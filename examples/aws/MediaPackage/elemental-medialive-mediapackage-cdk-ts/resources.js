// Generated by 'gc gencode'
const {} = require("rubico");
const {} = require("rubico/x");

exports.createResources = () => [
  {
    type: "Role",
    group: "IAM",
    properties: ({ config }) => ({
      RoleName:
        "StreamingStack-MyMediaLiveChannelMediaLiveAccessRo-OE2SQR0JQCHV",
      AssumeRolePolicyDocument: {
        Version: "2012-10-17",
        Statement: [
          {
            Effect: "Allow",
            Principal: {
              Service: "medialive.amazonaws.com",
            },
            Action: "sts:AssumeRole",
          },
        ],
      },
      Policies: [
        {
          PolicyDocument: {
            Version: "2012-10-17",
            Statement: [
              {
                Action: [
                  "mediaconnect:AddFlowOutputs",
                  "mediaconnect:ManagedAddOutput",
                  "mediaconnect:ManagedDescribeFlow",
                  "mediaconnect:ManagedRemoveOutput",
                ],
                Resource: `arn:aws:mediaconnect:${
                  config.region
                }:${config.accountId()}:*`,
                Effect: "Allow",
              },
            ],
          },
          PolicyName: "medialivecustom",
        },
      ],
      AttachedPolicies: [
        {
          PolicyName: "AWSElementalMediaPackageFullAccess",
          PolicyArn:
            "arn:aws:iam::aws:policy/AWSElementalMediaPackageFullAccess",
        },
        {
          PolicyName: "CloudWatchLogsFullAccess",
          PolicyArn: "arn:aws:iam::aws:policy/CloudWatchLogsFullAccess",
        },
      ],
    }),
  },
  {
    type: "Channel",
    group: "MediaLive",
    properties: ({ getId }) => ({
      ChannelClass: "STANDARD",
      Destinations: [
        {
          Id: "media-destination",
          MediaPackageSettings: [
            {
              ChannelId: "StreamingStack_MediaPackageChannel",
            },
          ],
          Settings: [],
        },
      ],
      EncoderSettings: {
        AudioDescriptions: [
          {
            AudioSelectorName: "default",
            AudioTypeControl: "FOLLOW_INPUT",
            CodecSettings: {
              AacSettings: {
                Bitrate: 96000,
                CodingMode: "CODING_MODE_2_0",
                InputType: "NORMAL",
                Profile: "LC",
                RateControlMode: "CBR",
                RawFormat: "NONE",
                Spec: "MPEG4",
              },
            },
            LanguageCodeControl: "FOLLOW_INPUT",
            Name: "audio_j8tr8",
          },
          {
            AudioSelectorName: "default",
            AudioTypeControl: "FOLLOW_INPUT",
            CodecSettings: {
              AacSettings: {
                Bitrate: 96000,
                CodingMode: "CODING_MODE_2_0",
                InputType: "NORMAL",
                Profile: "LC",
                RateControlMode: "CBR",
                RawFormat: "NONE",
                SampleRate: 48000,
                Spec: "MPEG4",
              },
            },
            LanguageCodeControl: "FOLLOW_INPUT",
            Name: "audio_6ht2vm",
          },
          {
            AudioSelectorName: "default",
            AudioTypeControl: "FOLLOW_INPUT",
            CodecSettings: {
              AacSettings: {
                Bitrate: 96000,
                CodingMode: "CODING_MODE_2_0",
                InputType: "NORMAL",
                Profile: "LC",
                RateControlMode: "CBR",
                RawFormat: "NONE",
                SampleRate: 48000,
                Spec: "MPEG4",
              },
            },
            LanguageCodeControl: "FOLLOW_INPUT",
            Name: "audio_s90hue",
          },
          {
            AudioSelectorName: "default",
            AudioTypeControl: "FOLLOW_INPUT",
            CodecSettings: {
              AacSettings: {
                Bitrate: 96000,
                CodingMode: "CODING_MODE_2_0",
                InputType: "NORMAL",
                Profile: "LC",
                RateControlMode: "CBR",
                RawFormat: "NONE",
                SampleRate: 48000,
                Spec: "MPEG4",
              },
            },
            LanguageCodeControl: "FOLLOW_INPUT",
            Name: "audio_i3rm19",
          },
          {
            AudioSelectorName: "default",
            AudioTypeControl: "FOLLOW_INPUT",
            CodecSettings: {
              AacSettings: {
                Bitrate: 96000,
                CodingMode: "CODING_MODE_2_0",
                InputType: "NORMAL",
                Profile: "LC",
                RateControlMode: "CBR",
                RawFormat: "NONE",
                SampleRate: 48000,
                Spec: "MPEG4",
              },
            },
            LanguageCodeControl: "FOLLOW_INPUT",
            Name: "audio_ze3rtr",
          },
        ],
        AvailConfiguration: {
          AvailSettings: {
            Scte35SpliceInsert: {
              WebDeliveryAllowedFlag: "FOLLOW",
            },
          },
        },
        CaptionDescriptions: [],
        OutputGroups: [
          {
            Name: "HLS HD",
            OutputGroupSettings: {
              MediaPackageGroupSettings: {
                Destination: {
                  DestinationRefId: "media-destination",
                },
              },
            },
            Outputs: [
              {
                AudioDescriptionNames: ["audio_j8tr8"],
                CaptionDescriptionNames: [],
                OutputName: "_512x288",
                OutputSettings: {
                  MediaPackageOutputSettings: {},
                },
                VideoDescriptionName: "_512x288",
              },
              {
                AudioDescriptionNames: ["audio_6ht2vm"],
                CaptionDescriptionNames: [],
                OutputName: "_640x360",
                OutputSettings: {
                  MediaPackageOutputSettings: {},
                },
                VideoDescriptionName: "_640x360",
              },
              {
                AudioDescriptionNames: ["audio_s90hue"],
                CaptionDescriptionNames: [],
                OutputName: "_764x432",
                OutputSettings: {
                  MediaPackageOutputSettings: {},
                },
                VideoDescriptionName: "_768x432",
              },
              {
                AudioDescriptionNames: ["audio_i3rm19"],
                CaptionDescriptionNames: [],
                OutputName: "_960x540",
                OutputSettings: {
                  MediaPackageOutputSettings: {},
                },
                VideoDescriptionName: "_960x540",
              },
              {
                AudioDescriptionNames: ["audio_ze3rtr"],
                CaptionDescriptionNames: [],
                OutputName: "_1280x720",
                OutputSettings: {
                  MediaPackageOutputSettings: {},
                },
                VideoDescriptionName: "_1280x720",
              },
            ],
          },
        ],
        TimecodeConfig: {
          Source: "EMBEDDED",
        },
        VideoDescriptions: [
          {
            CodecSettings: {
              H264Settings: {
                AdaptiveQuantization: "HIGH",
                AfdSignaling: "NONE",
                Bitrate: 400000,
                BufFillPct: 90,
                BufSize: 800000,
                ColorMetadata: "INSERT",
                EntropyEncoding: "CAVLC",
                FlickerAq: "ENABLED",
                FramerateControl: "SPECIFIED",
                FramerateDenominator: 1,
                FramerateNumerator: 15,
                GopBReference: "ENABLED",
                GopClosedCadence: 1,
                GopNumBFrames: 3,
                GopSize: 2,
                GopSizeUnits: "SECONDS",
                Level: "H264_LEVEL_AUTO",
                LookAheadRateControl: "HIGH",
                MaxBitrate: 400000,
                NumRefFrames: 5,
                ParControl: "SPECIFIED",
                ParDenominator: 1,
                ParNumerator: 1,
                Profile: "MAIN",
                QvbrQualityLevel: 6,
                RateControlMode: "QVBR",
                ScanType: "PROGRESSIVE",
                SceneChangeDetect: "ENABLED",
                SpatialAq: "ENABLED",
                SubgopLength: "DYNAMIC",
                Syntax: "DEFAULT",
                TemporalAq: "ENABLED",
                TimecodeInsertion: "DISABLED",
              },
            },
            Height: 288,
            Name: "_512x288",
            RespondToAfd: "NONE",
            ScalingBehavior: "DEFAULT",
            Sharpness: 100,
            Width: 512,
          },
          {
            CodecSettings: {
              H264Settings: {
                AdaptiveQuantization: "HIGH",
                AfdSignaling: "NONE",
                Bitrate: 800000,
                BufFillPct: 90,
                BufSize: 1600000,
                ColorMetadata: "INSERT",
                EntropyEncoding: "CAVLC",
                FlickerAq: "ENABLED",
                FramerateControl: "SPECIFIED",
                FramerateDenominator: 1,
                FramerateNumerator: 30,
                GopBReference: "ENABLED",
                GopClosedCadence: 1,
                GopNumBFrames: 3,
                GopSize: 2,
                GopSizeUnits: "SECONDS",
                Level: "H264_LEVEL_AUTO",
                LookAheadRateControl: "HIGH",
                MaxBitrate: 800000,
                NumRefFrames: 5,
                ParControl: "SPECIFIED",
                ParDenominator: 1,
                ParNumerator: 1,
                Profile: "MAIN",
                QvbrQualityLevel: 7,
                RateControlMode: "QVBR",
                ScanType: "PROGRESSIVE",
                SceneChangeDetect: "ENABLED",
                SpatialAq: "ENABLED",
                SubgopLength: "DYNAMIC",
                Syntax: "DEFAULT",
                TemporalAq: "ENABLED",
                TimecodeInsertion: "DISABLED",
              },
            },
            Height: 360,
            Name: "_640x360",
            RespondToAfd: "NONE",
            ScalingBehavior: "DEFAULT",
            Sharpness: 100,
            Width: 640,
          },
          {
            CodecSettings: {
              H264Settings: {
                AdaptiveQuantization: "HIGH",
                AfdSignaling: "NONE",
                Bitrate: 1200000,
                BufFillPct: 90,
                BufSize: 2400000,
                ColorMetadata: "INSERT",
                EntropyEncoding: "CAVLC",
                FlickerAq: "ENABLED",
                FramerateControl: "SPECIFIED",
                FramerateDenominator: 1,
                FramerateNumerator: 30,
                GopBReference: "ENABLED",
                GopClosedCadence: 1,
                GopNumBFrames: 3,
                GopSize: 2,
                GopSizeUnits: "SECONDS",
                Level: "H264_LEVEL_AUTO",
                LookAheadRateControl: "HIGH",
                MaxBitrate: 1200000,
                NumRefFrames: 5,
                ParControl: "SPECIFIED",
                ParDenominator: 1,
                ParNumerator: 1,
                Profile: "MAIN",
                QvbrQualityLevel: 7,
                RateControlMode: "QVBR",
                ScanType: "PROGRESSIVE",
                SceneChangeDetect: "ENABLED",
                SpatialAq: "ENABLED",
                SubgopLength: "DYNAMIC",
                Syntax: "DEFAULT",
                TemporalAq: "ENABLED",
                TimecodeInsertion: "DISABLED",
              },
            },
            Height: 432,
            Name: "_768x432",
            RespondToAfd: "NONE",
            ScalingBehavior: "DEFAULT",
            Sharpness: 100,
            Width: 768,
          },
          {
            CodecSettings: {
              H264Settings: {
                AdaptiveQuantization: "HIGH",
                AfdSignaling: "NONE",
                Bitrate: 1800000,
                BufFillPct: 90,
                BufSize: 3600000,
                ColorMetadata: "INSERT",
                EntropyEncoding: "CAVLC",
                FlickerAq: "ENABLED",
                FramerateControl: "SPECIFIED",
                FramerateDenominator: 1,
                FramerateNumerator: 30,
                GopBReference: "ENABLED",
                GopClosedCadence: 1,
                GopNumBFrames: 3,
                GopSize: 2,
                GopSizeUnits: "SECONDS",
                Level: "H264_LEVEL_AUTO",
                LookAheadRateControl: "HIGH",
                MaxBitrate: 1800000,
                NumRefFrames: 5,
                ParControl: "SPECIFIED",
                ParDenominator: 1,
                ParNumerator: 1,
                Profile: "MAIN",
                QvbrQualityLevel: 7,
                RateControlMode: "QVBR",
                ScanType: "PROGRESSIVE",
                SceneChangeDetect: "ENABLED",
                SpatialAq: "ENABLED",
                SubgopLength: "DYNAMIC",
                Syntax: "DEFAULT",
                TemporalAq: "ENABLED",
                TimecodeInsertion: "DISABLED",
              },
            },
            Height: 540,
            Name: "_960x540",
            RespondToAfd: "NONE",
            ScalingBehavior: "DEFAULT",
            Sharpness: 100,
            Width: 960,
          },
          {
            CodecSettings: {
              H264Settings: {
                AdaptiveQuantization: "HIGH",
                AfdSignaling: "NONE",
                Bitrate: 2700000,
                BufFillPct: 90,
                BufSize: 5400000,
                ColorMetadata: "INSERT",
                EntropyEncoding: "CAVLC",
                FlickerAq: "ENABLED",
                FramerateControl: "SPECIFIED",
                FramerateDenominator: 1,
                FramerateNumerator: 30,
                GopBReference: "ENABLED",
                GopClosedCadence: 1,
                GopNumBFrames: 3,
                GopSize: 2,
                GopSizeUnits: "SECONDS",
                Level: "H264_LEVEL_AUTO",
                LookAheadRateControl: "HIGH",
                MaxBitrate: 2700000,
                NumRefFrames: 5,
                ParControl: "SPECIFIED",
                ParDenominator: 1,
                ParNumerator: 1,
                Profile: "MAIN",
                QvbrQualityLevel: 8,
                RateControlMode: "QVBR",
                ScanType: "PROGRESSIVE",
                SceneChangeDetect: "ENABLED",
                SpatialAq: "ENABLED",
                SubgopLength: "DYNAMIC",
                Syntax: "DEFAULT",
                TemporalAq: "ENABLED",
                TimecodeInsertion: "DISABLED",
              },
            },
            Height: 720,
            Name: "_1280x720",
            RespondToAfd: "NONE",
            ScalingBehavior: "DEFAULT",
            Sharpness: 100,
            Width: 1280,
          },
        ],
      },
      InputAttachments: [
        {
          InputAttachmentName: "StreamingStack_URL_PULL_MediaLiveInput",
          InputId: `${getId({
            type: "Input",
            group: "MediaLive",
            name: "StreamingStack_URL_PULL_MediaLiveInput",
          })}`,
          InputSettings: {
            AudioSelectors: [],
            CaptionSelectors: [],
            SourceEndBehavior: "LOOP",
          },
        },
      ],
      InputSpecification: {
        Codec: "AVC",
        MaximumBitrate: "MAX_10_MBPS",
        Resolution: "HD",
      },
      Maintenance: {
        MaintenanceDay: "SATURDAY",
        MaintenanceStartTime: "14:00",
      },
      Name: "StreamingStack_MediaLiveChannel",
    }),
    dependencies: ({}) => ({
      iamRole:
        "StreamingStack-MyMediaLiveChannelMediaLiveAccessRo-OE2SQR0JQCHV",
      inputs: ["StreamingStack_URL_PULL_MediaLiveInput"],
    }),
  },
  {
    type: "Input",
    group: "MediaLive",
    properties: ({}) => ({
      InputClass: "STANDARD",
      InputSourceType: "STATIC",
      Name: "StreamingStack_URL_PULL_MediaLiveInput",
      Sources: [
        {
          Url: "https://d15an60oaeed9r.cloudfront.net/live_stream_v2/sports_reel_with_markers.m3u8",
        },
        {
          Url: "https://d15an60oaeed9r.cloudfront.net/live_stream_v2/sports_reel_with_markers.m3u8",
        },
      ],
      Type: "URL_PULL",
    }),
  },
  {
    type: "InputSecurityGroup",
    group: "MediaLive",
    properties: ({}) => ({
      WhitelistRules: [
        {
          Cidr: "0.0.0.0/0",
        },
      ],
    }),
  },
  {
    type: "Channel",
    group: "MediaPackage",
    properties: ({}) => ({
      Description: "Channel for StreamingStack",
      Id: "StreamingStack_MediaPackageChannel",
    }),
  },
  {
    type: "OriginEndpoint",
    group: "MediaPackage",
    properties: ({}) => ({
      CmafPackage: {
        HlsManifests: [
          {
            AdMarkers: "PASSTHROUGH",
            AdTriggers: [
              "SPLICE_INSERT",
              "PROVIDER_ADVERTISEMENT",
              "DISTRIBUTOR_ADVERTISEMENT",
              "PROVIDER_PLACEMENT_OPPORTUNITY",
              "DISTRIBUTOR_PLACEMENT_OPPORTUNITY",
            ],
            AdsOnDeliveryRestrictions: "RESTRICTED",
            Id: "StreamingStack-cmaf-StreamingStack_MediaPackageChannel",
            IncludeIframeOnlyStream: false,
            PlaylistType: "EVENT",
            PlaylistWindowSeconds: 60,
            ProgramDateTimeIntervalSeconds: 60,
          },
        ],
        SegmentDurationSeconds: 2,
        SegmentPrefix: "segmentPrefix",
        StreamSelection: {
          MaxVideoBitsPerSecond: 2147483647,
          MinVideoBitsPerSecond: 0,
          StreamOrder: "ORIGINAL",
        },
      },
      Id: "StreamingStack-cmaf-StreamingStack_MediaPackageChannel",
    }),
    dependencies: ({}) => ({
      channel: "StreamingStack_MediaPackageChannel",
    }),
  },
  {
    type: "OriginEndpoint",
    group: "MediaPackage",
    properties: ({}) => ({
      DashPackage: {
        AdTriggers: [
          "BREAK",
          "DISTRIBUTOR_ADVERTISEMENT",
          "DISTRIBUTOR_OVERLAY_PLACEMENT_OPPORTUNITY",
          "DISTRIBUTOR_PLACEMENT_OPPORTUNITY",
          "PROVIDER_ADVERTISEMENT",
          "PROVIDER_OVERLAY_PLACEMENT_OPPORTUNITY",
          "PROVIDER_PLACEMENT_OPPORTUNITY",
          "SPLICE_INSERT",
        ],
        AdsOnDeliveryRestrictions: "RESTRICTED",
        IncludeIframeOnlyStream: false,
        ManifestLayout: "FULL",
        ManifestWindowSeconds: 60,
        MinBufferTimeSeconds: 10,
        MinUpdatePeriodSeconds: 5,
        PeriodTriggers: [],
        Profile: "NONE",
        SegmentDurationSeconds: 5,
        SegmentTemplateFormat: "TIME_WITH_TIMELINE",
        StreamSelection: {
          MaxVideoBitsPerSecond: 2147483647,
          MinVideoBitsPerSecond: 0,
          StreamOrder: "ORIGINAL",
        },
        SuggestedPresentationDelaySeconds: 20,
        UtcTiming: "NONE",
      },
      Id: "StreamingStack-dash-StreamingStack_MediaPackageChannel",
    }),
    dependencies: ({}) => ({
      channel: "StreamingStack_MediaPackageChannel",
    }),
  },
  {
    type: "OriginEndpoint",
    group: "MediaPackage",
    properties: ({}) => ({
      HlsPackage: {
        AdMarkers: "PASSTHROUGH",
        AdTriggers: [
          "BREAK",
          "DISTRIBUTOR_ADVERTISEMENT",
          "DISTRIBUTOR_OVERLAY_PLACEMENT_OPPORTUNITY",
          "DISTRIBUTOR_PLACEMENT_OPPORTUNITY",
          "PROVIDER_ADVERTISEMENT",
          "PROVIDER_OVERLAY_PLACEMENT_OPPORTUNITY",
          "PROVIDER_PLACEMENT_OPPORTUNITY",
          "SPLICE_INSERT",
        ],
        AdsOnDeliveryRestrictions: "RESTRICTED",
        IncludeDvbSubtitles: false,
        IncludeIframeOnlyStream: false,
        PlaylistType: "EVENT",
        PlaylistWindowSeconds: 60,
        ProgramDateTimeIntervalSeconds: 0,
        SegmentDurationSeconds: 5,
        StreamSelection: {
          MaxVideoBitsPerSecond: 2147483647,
          MinVideoBitsPerSecond: 0,
          StreamOrder: "ORIGINAL",
        },
        UseAudioRenditionGroup: true,
      },
      Id: "StreamingStack-hls-StreamingStack_MediaPackageChannel",
    }),
    dependencies: ({}) => ({
      channel: "StreamingStack_MediaPackageChannel",
    }),
  },
  {
    type: "OriginEndpoint",
    group: "MediaPackage",
    properties: ({}) => ({
      Id: "StreamingStack-mss-StreamingStack_MediaPackageChannel",
      MssPackage: {
        ManifestWindowSeconds: 60,
        SegmentDurationSeconds: 5,
        StreamSelection: {
          MaxVideoBitsPerSecond: 2147483647,
          MinVideoBitsPerSecond: 0,
          StreamOrder: "ORIGINAL",
        },
      },
    }),
    dependencies: ({}) => ({
      channel: "StreamingStack_MediaPackageChannel",
    }),
  },
];
