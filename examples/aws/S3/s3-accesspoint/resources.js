// Generated by 'gc gencode'
const {} = require("rubico");
const {} = require("rubico/x");

exports.createResources = () => [
  {
    type: "Bucket",
    group: "S3",
    properties: ({}) => ({
      Name: "gc-buclet-accesspoint-test",
      ServerSideEncryptionConfiguration: {
        Rules: [
          {
            ApplyServerSideEncryptionByDefault: {
              SSEAlgorithm: "AES256",
            },
            BucketKeyEnabled: true,
          },
        ],
      },
    }),
  },
  {
    type: "AccessPoint",
    group: "S3Control",
    properties: ({ config }) => ({
      Bucket: "gc-buclet-accesspoint-test",
      Name: "my-accesspoint",
      NetworkOrigin: "Internet",
      Policy: {
        Statement: [
          {
            Action: ["s3:GetObject", "s3:PutObject"],
            Effect: "Allow",
            Principal: {
              AWS: `arn:aws:iam::${config.accountId()}:root`,
            },
            Resource: `arn:aws:s3:${
              config.region
            }:${config.accountId()}:accesspoint/my-accesspoint/object/Jane/*`,
          },
        ],
        Version: "2012-10-17",
      },
      PublicAccessBlockConfiguration: {
        BlockPublicAcls: true,
        BlockPublicPolicy: true,
        IgnorePublicAcls: true,
        RestrictPublicBuckets: true,
      },
    }),
    dependencies: ({}) => ({
      s3Bucket: "gc-buclet-accesspoint-test",
    }),
  },
];
