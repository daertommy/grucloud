// Generated by 'gc gencode'
const {} = require("rubico");
const {} = require("rubico/x");

exports.createResources = () => [
  {
    type: "Rule",
    group: "CloudWatchEvents",
    properties: ({}) => ({
      EventPattern: {
        "detail-type": ["CodeBuild Build State Change"],
        detail: {
          "build-status": ["SUCCEEDED", "FAILED", "STOPPED"],
          "project-name": ["longrunningscriptbuildproje-m28pRYaYpwc7"],
        },
        source: ["aws.codebuild"],
      },
      Name: "EventBridgeCodeBuildSNSSt-codebuildscriptscomplete-1PAUBE0S20H64",
    }),
  },
  {
    type: "Rule",
    group: "CloudWatchEvents",
    properties: ({}) => ({
      Name: "EventBridgeCodeBuildSNSSt-longrunningscriptbuildtr-1KMRBMZAVANII",
      ScheduleExpression: "rate(1 hour)",
    }),
  },
  {
    type: "Target",
    group: "CloudWatchEvents",
    properties: ({}) => ({
      Id: "Target0",
    }),
    dependencies: ({}) => ({
      rule: "EventBridgeCodeBuildSNSSt-codebuildscriptscomplete-1PAUBE0S20H64",
      snsTopic:
        "EventBridgeCodeBuildSNSStack-scriptcompletestopic6E3FF587-uefg0qUhkcSp",
    }),
  },
  {
    type: "Target",
    group: "CloudWatchEvents",
    properties: ({}) => ({
      Id: "Target0",
    }),
    dependencies: ({}) => ({
      rule: "EventBridgeCodeBuildSNSSt-longrunningscriptbuildtr-1KMRBMZAVANII",
      role: "EventBridgeCodeBuildSNSSt-longrunningscriptbuildpr-JMLCJF4DZLSS",
      codeBuildProject: "longrunningscriptbuildproje-m28pRYaYpwc7",
    }),
  },
  {
    type: "LogGroup",
    group: "CloudWatchLogs",
    properties: ({}) => ({
      logGroupName: "/aws/codebuild/longrunningscriptbuildproje-m28pRYaYpwc7",
    }),
  },
  {
    type: "Project",
    group: "CodeBuild",
    properties: ({}) => ({
      artifacts: {
        type: "NO_ARTIFACTS",
      },
      environment: {
        computeType: "BUILD_GENERAL1_SMALL",
        environmentVariables: [
          {
            name: "S3_ARTIFACTS_BUCKET",
            type: "PLAINTEXT",
            value:
              "eventbridgecodebuildsnsst-artifactsbucket49dac999-9ofsd695oa0y",
          },
          {
            name: "S3_ARTIFACTS_OBJECT",
            type: "PLAINTEXT",
            value: "script.py",
          },
        ],
        image: "aws/codebuild/standard:3.0",
        imagePullCredentialsType: "CODEBUILD",
        privilegedMode: false,
        type: "LINUX_CONTAINER",
      },
      name: "longrunningscriptbuildproje-m28pRYaYpwc7",
      source: {
        buildspec: `{
  "version": "0.2",
  "phases": {
    "install": {
      "runtime-versions": {
        "python": 3.8
      }
    },
    "build": {
      "commands": [
        "aws s3 cp s3://$S3_ARTIFACTS_BUCKET/$S3_ARTIFACTS_OBJECT $S3_ARTIFACTS_OBJECT",
        "python $S3_ARTIFACTS_OBJECT"
      ]
    }
  }
}`,
        type: "NO_SOURCE",
      },
    }),
    dependencies: ({}) => ({
      serviceRole:
        "EventBridgeCodeBuildSNSSt-longrunningscriptbuildpr-J6RQUU37F973",
    }),
  },
  {
    type: "Role",
    group: "IAM",
    properties: ({ config }) => ({
      RoleName:
        "EventBridgeCodeBuildSNSSt-longrunningscriptbuildpr-J6RQUU37F973",
      AssumeRolePolicyDocument: {
        Version: "2012-10-17",
        Statement: [
          {
            Effect: "Allow",
            Principal: {
              Service: "codebuild.amazonaws.com",
            },
            Action: "sts:AssumeRole",
          },
        ],
      },
      Policies: [
        {
          PolicyDocument: {
            Version: "2012-10-17",
            Statement: [
              {
                Action: [
                  "logs:CreateLogGroup",
                  "logs:CreateLogStream",
                  "logs:PutLogEvents",
                ],
                Resource: [
                  `arn:aws:logs:${
                    config.region
                  }:${config.accountId()}:log-group:/aws/codebuild/longrunningscriptbuildproje-m28pRYaYpwc7`,
                  `arn:aws:logs:${
                    config.region
                  }:${config.accountId()}:log-group:/aws/codebuild/longrunningscriptbuildproje-m28pRYaYpwc7:*`,
                ],
                Effect: "Allow",
              },
              {
                Action: [
                  "codebuild:CreateReportGroup",
                  "codebuild:CreateReport",
                  "codebuild:UpdateReport",
                  "codebuild:BatchPutTestCases",
                  "codebuild:BatchPutCodeCoverages",
                ],
                Resource: `arn:aws:codebuild:${
                  config.region
                }:${config.accountId()}:report-group/longrunningscriptbuildproje-m28pRYaYpwc7-*`,
                Effect: "Allow",
              },
              {
                Action: ["s3:GetObject*", "s3:GetBucket*", "s3:List*"],
                Resource: [
                  "arn:aws:s3:::eventbridgecodebuildsnsst-artifactsbucket49dac999-9ofsd695oa0y",
                  "arn:aws:s3:::eventbridgecodebuildsnsst-artifactsbucket49dac999-9ofsd695oa0y/*",
                ],
                Effect: "Allow",
              },
            ],
          },
          PolicyName: "longrunningscriptbuildprojectRoleDefaultPolicy42810104",
        },
      ],
    }),
  },
  {
    type: "Role",
    group: "IAM",
    properties: ({ config }) => ({
      RoleName:
        "EventBridgeCodeBuildSNSSt-longrunningscriptbuildpr-JMLCJF4DZLSS",
      AssumeRolePolicyDocument: {
        Version: "2012-10-17",
        Statement: [
          {
            Effect: "Allow",
            Principal: {
              Service: "events.amazonaws.com",
            },
            Action: "sts:AssumeRole",
          },
        ],
      },
      Policies: [
        {
          PolicyDocument: {
            Version: "2012-10-17",
            Statement: [
              {
                Action: "codebuild:StartBuild",
                Resource: `arn:aws:codebuild:${
                  config.region
                }:${config.accountId()}:project/longrunningscriptbuildproje-m28pRYaYpwc7`,
                Effect: "Allow",
              },
            ],
          },
          PolicyName:
            "longrunningscriptbuildprojectEventsRoleDefaultPolicyC1284ED6",
        },
      ],
    }),
  },
  {
    type: "Bucket",
    group: "S3",
    properties: ({}) => ({
      Name: "eventbridgecodebuildsnsst-artifactsbucket49dac999-9ofsd695oa0y",
      ServerSideEncryptionConfiguration: {
        Rules: [
          {
            ApplyServerSideEncryptionByDefault: {
              SSEAlgorithm: "AES256",
            },
          },
        ],
      },
    }),
  },
  {
    type: "Topic",
    group: "SNS",
    name: "EventBridgeCodeBuildSNSStack-scriptcompletestopic6E3FF587-uefg0qUhkcSp",
    properties: ({ config }) => ({
      Attributes: {
        Policy: {
          Version: "2012-10-17",
          Statement: [
            {
              Sid: "0",
              Effect: "Allow",
              Principal: {
                Service: "events.amazonaws.com",
              },
              Action: "sns:Publish",
              Resource: `arn:aws:sns:${
                config.region
              }:${config.accountId()}:EventBridgeCodeBuildSNSStack-scriptcompletestopic6E3FF587-uefg0qUhkcSp`,
            },
          ],
        },
      },
    }),
  },
];
