// Generated by 'gc gencode'
const {} = require("rubico");
const {} = require("rubico/x");

exports.createResources = () => [
  {
    type: "Vpc",
    group: "EC2",
    name: "vpc-4-record-vpc-endpoint",
    properties: ({}) => ({
      CidrBlock: "10.0.0.0/16",
      DnsHostnames: true,
    }),
  },
  {
    type: "Subnet",
    group: "EC2",
    name: "vpc-4-record-vpc-endpoint::subnet-public",
    properties: ({ config }) => ({
      AvailabilityZone: `${config.region}d`,
      CidrBlock: "10.0.0.0/24",
    }),
    dependencies: ({}) => ({
      vpc: "vpc-4-record-vpc-endpoint",
    }),
  },
  {
    type: "VpcEndpoint",
    group: "EC2",
    name: "endpoint-ec2",
    properties: ({ config }) => ({
      PolicyDocument: {
        Statement: [
          {
            Action: "*",
            Effect: "Allow",
            Principal: "*",
            Resource: `*`,
          },
        ],
      },
      PrivateDnsEnabled: true,
      RequesterManaged: false,
      VpcEndpointType: "Interface",
      ServiceName: `com.amazonaws.${config.region}.ec2`,
    }),
    dependencies: ({}) => ({
      vpc: "vpc-4-record-vpc-endpoint",
      subnets: ["vpc-4-record-vpc-endpoint::subnet-public"],
    }),
  },
  {
    type: "HostedZone",
    group: "Route53",
    name: "vpce.grucloud.org.",
    dependencies: ({}) => ({
      domain: "grucloud.org",
      vpc: "vpc-4-record-vpc-endpoint",
    }),
  },
  {
    type: "Record",
    group: "Route53",
    properties: ({}) => ({
      Name: "ec2.vpce.grucloud.org.",
      Type: "A",
      AliasTarget: {
        EvaluateTargetHealth: true,
      },
    }),
    dependencies: ({}) => ({
      hostedZone: "vpce.grucloud.org.",
      vpcEndpoint: "endpoint-ec2",
    }),
  },
  {
    type: "Domain",
    group: "Route53Domains",
    name: "grucloud.org",
    readOnly: true,
  },
];
