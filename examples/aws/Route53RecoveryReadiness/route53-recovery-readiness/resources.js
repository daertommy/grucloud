// Generated by 'gc gencode'
const {} = require("rubico");
const {} = require("rubico/x");

exports.createResources = () => [
  {
    type: "Table",
    group: "DynamoDB",
    properties: ({}) => ({
      TableName: "my-table",
      AttributeDefinitions: [
        {
          AttributeName: "Id",
          AttributeType: "S",
        },
      ],
      KeySchema: [
        {
          AttributeName: "Id",
          KeyType: "HASH",
        },
      ],
      ProvisionedThroughput: {
        ReadCapacityUnits: 1,
        WriteCapacityUnits: 1,
      },
    }),
  },
  {
    type: "Cell",
    group: "Route53RecoveryReadiness",
    properties: ({}) => ({
      CellName: "my-recoverygroup-cell1",
    }),
  },
  {
    type: "Cell",
    group: "Route53RecoveryReadiness",
    properties: ({}) => ({
      CellName: "my-recoverygroup-cell2",
    }),
  },
  {
    type: "ReadinessCheck",
    group: "Route53RecoveryReadiness",
    properties: ({}) => ({
      ReadinessCheckName: "dynamodb",
    }),
    dependencies: ({}) => ({
      resourceSet: "dynamodb",
    }),
  },
  {
    type: "RecoveryGroup",
    group: "Route53RecoveryReadiness",
    properties: ({}) => ({
      RecoveryGroupName: "my-recoverygroup",
    }),
    dependencies: ({}) => ({
      cells: ["my-recoverygroup-cell1", "my-recoverygroup-cell2"],
    }),
  },
  {
    type: "ResourceSet",
    group: "Route53RecoveryReadiness",
    properties: ({ getId }) => ({
      ResourceSetName: "dynamodb",
      ResourceSetType: "AWS::DynamoDB::Table",
      Resources: [
        {
          ReadinessScopes: [
            `${getId({
              type: "Cell",
              group: "Route53RecoveryReadiness",
              name: "my-recoverygroup-cell1",
            })}`,
          ],
          ResourceArn: `${getId({
            type: "Table",
            group: "DynamoDB",
            name: "my-table",
          })}`,
        },
      ],
    }),
    dependencies: ({}) => ({
      cells: ["my-recoverygroup-cell1"],
      dynamoDBTable: "my-table",
    }),
  },
];
