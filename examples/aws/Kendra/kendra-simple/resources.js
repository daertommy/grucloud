// Generated by 'gc gencode'
const {} = require("rubico");
const {} = require("rubico/x");

exports.createResources = () => [
  {
    type: "LogGroup",
    group: "CloudWatchLogs",
    properties: ({}) => ({
      logGroupName: "/aws/kendra/9c7530f6-0756-44b6-93dc-4939a8dfadbb",
    }),
  },
  {
    type: "Role",
    group: "IAM",
    properties: ({}) => ({
      RoleName: "AmazonKendra-block",
      Description: "AmazonKendra-block",
      Path: "/service-role/",
      AssumeRolePolicyDocument: {
        Version: "2012-10-17",
        Statement: [
          {
            Effect: "Allow",
            Principal: {
              Service: "kendra.amazonaws.com",
            },
            Action: "sts:AssumeRole",
          },
        ],
      },
    }),
    dependencies: ({}) => ({
      policies: ["AmazonKendra-block"],
    }),
  },
  {
    type: "Role",
    group: "IAM",
    properties: ({}) => ({
      RoleName: "AmazonKendra-experience",
      Description: "AmazonKendra-experience",
      Path: "/service-role/",
      AssumeRolePolicyDocument: {
        Version: "2012-10-17",
        Statement: [
          {
            Effect: "Allow",
            Principal: {
              Service: "kendra.amazonaws.com",
            },
            Action: "sts:AssumeRole",
          },
        ],
      },
    }),
    dependencies: ({}) => ({
      policies: ["AmazonKendra-experience"],
    }),
  },
  {
    type: "Role",
    group: "IAM",
    properties: ({}) => ({
      RoleName: "AmazonKendra-faq",
      Description: "AmazonKendra-faq",
      Path: "/service-role/",
      AssumeRolePolicyDocument: {
        Version: "2012-10-17",
        Statement: [
          {
            Effect: "Allow",
            Principal: {
              Service: "kendra.amazonaws.com",
            },
            Action: "sts:AssumeRole",
          },
        ],
      },
    }),
    dependencies: ({}) => ({
      policies: ["AmazonKendra-faq"],
    }),
  },
  {
    type: "Role",
    group: "IAM",
    properties: ({}) => ({
      RoleName:
        "AmazonKendra-sample-s3-role-bd173dde-6547-4fa4-9497-e1263c47ac9c",
      Description:
        "AmazonKendra-sample-s3-role-bd173dde-6547-4fa4-9497-e1263c47ac9c",
      Path: "/service-role/",
      AssumeRolePolicyDocument: {
        Version: "2012-10-17",
        Statement: [
          {
            Effect: "Allow",
            Principal: {
              Service: "kendra.amazonaws.com",
            },
            Action: "sts:AssumeRole",
          },
        ],
      },
    }),
    dependencies: ({}) => ({
      policies: [
        "AmazonKendra-sample-s3-role-bd173dde-6547-4fa4-9497-e1263c47ac9c",
      ],
    }),
  },
  {
    type: "Role",
    group: "IAM",
    properties: ({ config }) => ({
      RoleName: `AmazonKendra-${config.region}-my-index`,
      Description: "AmazonKendra-us-east-1-my-index",
      Path: "/service-role/",
      AssumeRolePolicyDocument: {
        Version: "2012-10-17",
        Statement: [
          {
            Effect: "Allow",
            Principal: {
              Service: "kendra.amazonaws.com",
            },
            Action: "sts:AssumeRole",
          },
        ],
      },
    }),
    dependencies: ({ config }) => ({
      policies: [`AmazonKendra-${config.region}-my-index`],
    }),
  },
  {
    type: "Policy",
    group: "IAM",
    properties: ({}) => ({
      PolicyName: "AmazonKendra-block",
      PolicyDocument: {
        Version: "2012-10-17",
        Statement: [
          {
            Action: ["s3:GetObject"],
            Resource: ["arn:aws:s3:::gc-kendra-test/*"],
            Effect: "Allow",
          },
        ],
      },
      Path: "/service-role/",
    }),
  },
  {
    type: "Policy",
    group: "IAM",
    properties: ({ config }) => ({
      PolicyName: "AmazonKendra-experience",
      PolicyDocument: {
        Version: "2012-10-17",
        Statement: [
          {
            Sid: "AllowsKendraSearchAppToCallKendraApi",
            Effect: "Allow",
            Action: [
              "kendra:GetQuerySuggestions",
              "kendra:Query",
              "kendra:DescribeIndex",
              "kendra:ListFaqs",
              "kendra:DescribeDataSource",
              "kendra:ListDataSources",
              "kendra:DescribeFaq",
              "kendra:SubmitFeedback",
            ],
            Resource: [
              `arn:aws:kendra:${
                config.region
              }:${config.accountId()}:index/5d01bebc-493c-480c-8519-70f52ecf916e`,
            ],
          },
          {
            Sid: "AllowKendraSearchAppToDescribeDataSourcesAndFaq",
            Effect: "Allow",
            Action: ["kendra:DescribeDataSource", "kendra:DescribeFaq"],
            Resource: [
              `arn:aws:kendra:${
                config.region
              }:${config.accountId()}:index/5d01bebc-493c-480c-8519-70f52ecf916e/data-source/630c7ef3-a593-4dd1-8abd-29fa1bea1c76`,
              `arn:aws:kendra:${
                config.region
              }:${config.accountId()}:index/5d01bebc-493c-480c-8519-70f52ecf916e/faq/3d01e395-befd-4585-8a00-23843f9d4e4c`,
            ],
          },
          {
            Sid: "AllowKendraSearchAppToCallSSODescribeUsersAndGroups",
            Effect: "Allow",
            Action: [
              "sso-directory:ListGroupsForUser",
              "sso-directory:SearchGroups",
              "sso-directory:SearchUsers",
              "sso-directory:DescribeUser",
              "sso-directory:DescribeGroup",
              "sso-directory:DescribeGroups",
              "sso-directory:DescribeUsers",
              "sso-directory:IsMemberInGroup",
            ],
            Resource: ["*"],
          },
        ],
      },
      Path: "/service-role/",
    }),
  },
  {
    type: "Policy",
    group: "IAM",
    properties: ({}) => ({
      PolicyName: "AmazonKendra-faq",
      PolicyDocument: {
        Version: "2012-10-17",
        Statement: [
          {
            Action: ["s3:GetObject"],
            Resource: ["arn:aws:s3:::gc-kendra-test/*"],
            Effect: "Allow",
          },
        ],
      },
      Path: "/service-role/",
    }),
  },
  {
    type: "Policy",
    group: "IAM",
    properties: ({ config }) => ({
      PolicyName:
        "AmazonKendra-sample-s3-role-bd173dde-6547-4fa4-9497-e1263c47ac9c",
      PolicyDocument: {
        Version: "2012-10-17",
        Statement: [
          {
            Action: ["s3:GetObject"],
            Resource: [
              `arn:aws:s3:::amazon-kendra-sample-docs-${config.region}/*`,
            ],
            Effect: "Allow",
          },
          {
            Action: ["s3:ListBucket"],
            Resource: [
              `arn:aws:s3:::amazon-kendra-sample-docs-${config.region}`,
            ],
            Effect: "Allow",
          },
          {
            Effect: "Allow",
            Action: ["kendra:BatchPutDocument", "kendra:BatchDeleteDocument"],
            Resource: `arn:aws:kendra:${
              config.region
            }:${config.accountId()}:index/9c7530f6-0756-44b6-93dc-4939a8dfadbb`,
          },
        ],
      },
      Path: "/service-role/",
    }),
  },
  {
    type: "Policy",
    group: "IAM",
    properties: ({ config }) => ({
      PolicyName: `AmazonKendra-${config.region}-my-index`,
      PolicyDocument: {
        Version: "2012-10-17",
        Statement: [
          {
            Effect: "Allow",
            Action: ["cloudwatch:PutMetricData"],
            Resource: "*",
            Condition: {
              StringEquals: {
                "cloudwatch:namespace": "AWS/Kendra",
              },
            },
          },
          {
            Effect: "Allow",
            Action: ["logs:DescribeLogGroups"],
            Resource: "*",
          },
          {
            Effect: "Allow",
            Action: ["logs:CreateLogGroup"],
            Resource: [
              `arn:aws:logs:${
                config.region
              }:${config.accountId()}:log-group:/aws/kendra/*`,
            ],
          },
          {
            Effect: "Allow",
            Action: [
              "logs:DescribeLogStreams",
              "logs:CreateLogStream",
              "logs:PutLogEvents",
            ],
            Resource: [
              `arn:aws:logs:${
                config.region
              }:${config.accountId()}:log-group:/aws/kendra/*:log-stream:*`,
            ],
          },
        ],
      },
      Path: "/service-role/",
    }),
  },
  {
    type: "DataSource",
    group: "Kendra",
    properties: ({}) => ({
      Configuration: {
        S3Configuration: {
          BucketName: "amazon-kendra-sample-docs-us-east-1",
          DocumentsMetadataConfiguration: {
            S3Prefix: "metadata/",
          },
          InclusionPrefixes: ["documents/"],
        },
      },
      LanguageCode: "en",
      Name: "my-dataset",
      Type: "S3",
    }),
    dependencies: ({}) => ({
      index: "my-index",
      iamRole:
        "AmazonKendra-sample-s3-role-bd173dde-6547-4fa4-9497-e1263c47ac9c",
    }),
  },
  {
    type: "Experience",
    group: "Kendra",
    properties: ({}) => ({
      Configuration: {
        ContentSourceConfiguration: {
          DirectPutContent: false,
        },
      },
      Name: "my-experience",
    }),
    dependencies: ({}) => ({
      dataSources: ["my-dataset"],
      faqs: ["my-faq"],
      iamRole: "AmazonKendra-experience",
      index: "my-index",
    }),
  },
  {
    type: "Faq",
    group: "Kendra",
    properties: ({}) => ({
      FileFormat: "JSON",
      LanguageCode: "en",
      Name: "my-faq",
      S3Path: {
        Bucket: "gc-kendra-test",
        Key: "data.json",
      },
    }),
    dependencies: ({}) => ({
      index: "my-index",
      iamRole: "AmazonKendra-faq",
      s3Bucket: "gc-kendra-test",
    }),
  },
  {
    type: "Index",
    group: "Kendra",
    properties: ({}) => ({
      CapacityUnits: {
        QueryCapacityUnits: 0,
        StorageCapacityUnits: 0,
      },
      Edition: "DEVELOPER_EDITION",
      Name: "my-index",
      UserContextPolicy: "ATTRIBUTE_FILTER",
      UserGroupResolutionConfiguration: {
        UserGroupResolutionMode: "NONE",
      },
    }),
    dependencies: ({ config }) => ({
      iamRole: `AmazonKendra-${config.region}-my-index`,
    }),
  },
  {
    type: "QuerySuggestionsBlockList",
    group: "Kendra",
    properties: ({}) => ({
      Name: "my-block-list",
      SourceS3Path: {
        Bucket: "gc-kendra-test",
        Key: "blockList.txt",
      },
    }),
    dependencies: ({}) => ({
      index: "my-index",
      iamRole: "AmazonKendra-block",
      s3Bucket: "gc-kendra-test",
    }),
  },
  {
    type: "Bucket",
    group: "S3",
    properties: ({}) => ({
      Name: "gc-kendra-test",
    }),
  },
  {
    type: "Object",
    group: "S3",
    properties: ({}) => ({
      Key: "blockList.txt",
      ContentType: "text/plain",
      ServerSideEncryption: "AES256",
      source: "s3/gc-kendra-test/blockList.txt",
    }),
    dependencies: ({}) => ({
      bucket: "gc-kendra-test",
    }),
  },
  {
    type: "Object",
    group: "S3",
    properties: ({}) => ({
      Key: "data.json",
      ContentType: "application/json",
      ServerSideEncryption: "AES256",
      source: "s3/gc-kendra-test/data.json",
    }),
    dependencies: ({}) => ({
      bucket: "gc-kendra-test",
    }),
  },
];
