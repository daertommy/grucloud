// Generated by 'gc gencode'
const {} = require("rubico");
const {} = require("rubico/x");

exports.createResources = () => [
  {
    type: "App",
    group: "Amplify",
    properties: ({}) => ({
      buildSpec: `version: 1
applications:
  - backend:
      phases:
        build:
          commands:
            - '# Execute Amplify CLI with the helper script'
            - amplifyPush --simple
    frontend:
      phases:
        preBuild:
          commands:
            - npm install
        build:
          commands:
            - npm run build
      artifacts:
        baseDirectory: build
        files:
          - '**/*'
      cache:
        paths:
          - node_modules/**/*
    appRoot: samples/react/auth/authenticator
`,
      customHeaders: "",
      customRules: [
        {
          source: "/<*>",
          status: "404-200",
          target: "/index.html",
        },
        {
          source:
            "</^[^.]+$|\\.(?!(css|gif|ico|jpg|js|png|txt|svg|woff|ttf|map|json)$)([^.]+$)/>",
          status: "200",
          target: "/index.html",
        },
      ],
      enableAutoBranchCreation: false,
      enableBasicAuth: false,
      enableBranchAutoBuild: false,
      enableBranchAutoDeletion: false,
      environmentVariables: {
        AMPLIFY_DIFF_DEPLOY: "false",
        AMPLIFY_MONOREPO_APP_ROOT: "samples/react/auth/authenticator",
        _LIVE_UPDATES:
          '[{"name":"Amplify CLI","pkg":"@aws-amplify/cli","type":"npm","version":"latest"}]',
      },
      name: "amplify-js-samples-samples/react/auth/authenticator",
      platform: "WEB",
      repository: "https://github.com/FredericHeem/amplify-js-samples",
      repositoryCloneMethod: "SSH",
      accessToken:
        process.env
          .AMPLIFY_JS_SAMPLES_SAMPLES_REACT_AUTH_AUTHENTICATOR_APP_ACCESSTOKEN,
    }),
    dependencies: ({}) => ({
      iamRole: "amplifyconsole-backend-role",
    }),
  },
  {
    type: "BackendEnvironment",
    group: "Amplify",
    properties: ({}) => ({
      deploymentArtifacts: "amplify-authenticator-main-180120-deployment",
      environmentName: "main",
      stackName: "amplify-authenticator-main-180120",
    }),
    dependencies: ({}) => ({
      app: "amplify-js-samples-samples/react/auth/authenticator",
    }),
  },
  {
    type: "Role",
    group: "IAM",
    properties: ({}) => ({
      RoleName: "amplify-authenticator-main-180120-authRole",
      AssumeRolePolicyDocument: {
        Version: "2012-10-17",
        Statement: [
          {
            Sid: "",
            Effect: "Deny",
            Principal: {
              Federated: "cognito-identity.amazonaws.com",
            },
            Action: "sts:AssumeRoleWithWebIdentity",
          },
        ],
      },
      Tags: [
        {
          Key: "user:Application",
          Value: "authenticator",
        },
        {
          Key: "user:Stack",
          Value: "main",
        },
      ],
    }),
  },
  {
    type: "Role",
    group: "IAM",
    properties: ({}) => ({
      RoleName: "amplify-authenticator-main-180120-unauthRole",
      AssumeRolePolicyDocument: {
        Version: "2012-10-17",
        Statement: [
          {
            Sid: "",
            Effect: "Deny",
            Principal: {
              Federated: "cognito-identity.amazonaws.com",
            },
            Action: "sts:AssumeRoleWithWebIdentity",
          },
        ],
      },
      Tags: [
        {
          Key: "user:Application",
          Value: "authenticator",
        },
        {
          Key: "user:Stack",
          Value: "main",
        },
      ],
    }),
  },
  {
    type: "Role",
    group: "IAM",
    properties: ({}) => ({
      RoleName: "amplifyconsole-backend-role",
      Description:
        "Allows Amplify Backend Deployment to access AWS resources on your behalf.",
      AssumeRolePolicyDocument: {
        Version: "2012-10-17",
        Statement: [
          {
            Effect: "Allow",
            Principal: {
              Service: "amplify.amazonaws.com",
            },
            Action: "sts:AssumeRole",
          },
        ],
      },
      AttachedPolicies: [
        {
          PolicyName: "AdministratorAccess-Amplify",
          PolicyArn: "arn:aws:iam::aws:policy/AdministratorAccess-Amplify",
        },
      ],
    }),
  },
  {
    type: "Bucket",
    group: "S3",
    properties: ({}) => ({
      Name: "amplify-authenticator-main-180120-deployment",
      ServerSideEncryptionConfiguration: {
        Rules: [
          {
            ApplyServerSideEncryptionByDefault: {
              SSEAlgorithm: "AES256",
            },
          },
        ],
      },
      Tags: [
        {
          Key: "user:Application",
          Value: "authenticator",
        },
        {
          Key: "user:Stack",
          Value: "main",
        },
      ],
    }),
  },
];
