// Generated by 'gc gencode'
const {} = require("rubico");
const {} = require("rubico/x");

exports.createResources = () => [
  {
    type: "LogGroup",
    group: "CloudWatchLogs",
    name: "/aws/network-firewall/alerts",
    properties: ({}) => ({
      retentionInDays: 7,
    }),
    dependencies: ({}) => ({
      kmsKey: "kms-key-aws-hub-and-spoke-demo",
    }),
  },
  {
    type: "LogGroup",
    group: "CloudWatchLogs",
    name: "/aws/network-firewall/flows",
    properties: ({}) => ({
      retentionInDays: 7,
    }),
    dependencies: ({}) => ({
      kmsKey: "kms-key-aws-hub-and-spoke-demo",
    }),
  },
  { type: "KeyPair", group: "EC2", name: "large-badger" },
  {
    type: "Vpc",
    group: "EC2",
    name: "inspection-vpc",
    properties: ({}) => ({
      CidrBlock: "10.129.0.0/16",
      DnsHostnames: true,
    }),
  },
  {
    type: "Vpc",
    group: "EC2",
    name: "spoke-vpc-1",
    properties: ({}) => ({
      CidrBlock: "10.11.0.0/16",
      DnsHostnames: true,
    }),
  },
  {
    type: "Vpc",
    group: "EC2",
    name: "spoke-vpc-2",
    properties: ({}) => ({
      CidrBlock: "10.12.0.0/16",
      DnsHostnames: true,
    }),
  },
  { type: "InternetGateway", group: "EC2", name: "inspection-vpc" },
  {
    type: "InternetGatewayAttachment",
    group: "EC2",
    dependencies: ({}) => ({
      vpc: "inspection-vpc",
      internetGateway: "inspection-vpc",
    }),
  },
  {
    type: "NatGateway",
    group: "EC2",
    name: ({ config }) => `inspection-vpc-${config.region}a`,
    dependencies: ({ config }) => ({
      subnet: `inspection-vpc::inspection-vpc-public-subnet-${config.region}a`,
      eip: `inspection-vpc-${config.region}a`,
    }),
  },
  {
    type: "Subnet",
    group: "EC2",
    name: ({ config }) =>
      `inspection-vpc::inspection-vpc-intra-subnet-${config.region}a`,
    properties: ({ config }) => ({
      AvailabilityZone: `${config.region}a`,
      NewBits: 8,
      NetworkNumber: 200,
    }),
    dependencies: ({}) => ({
      vpc: "inspection-vpc",
    }),
  },
  {
    type: "Subnet",
    group: "EC2",
    name: ({ config }) =>
      `inspection-vpc::inspection-vpc-intra-subnet-${config.region}b`,
    properties: ({ config }) => ({
      AvailabilityZone: `${config.region}b`,
      NewBits: 8,
      NetworkNumber: 201,
    }),
    dependencies: ({}) => ({
      vpc: "inspection-vpc",
    }),
  },
  {
    type: "Subnet",
    group: "EC2",
    name: ({ config }) =>
      `inspection-vpc::inspection-vpc-intra-subnet-${config.region}c`,
    properties: ({ config }) => ({
      AvailabilityZone: `${config.region}c`,
      NewBits: 8,
      NetworkNumber: 202,
    }),
    dependencies: ({}) => ({
      vpc: "inspection-vpc",
    }),
  },
  {
    type: "Subnet",
    group: "EC2",
    name: ({ config }) =>
      `inspection-vpc::inspection-vpc-private-subnet-${config.region}a`,
    properties: ({ config }) => ({
      AvailabilityZone: `${config.region}a`,
      NewBits: 8,
      NetworkNumber: 1,
    }),
    dependencies: ({}) => ({
      vpc: "inspection-vpc",
    }),
  },
  {
    type: "Subnet",
    group: "EC2",
    name: ({ config }) =>
      `inspection-vpc::inspection-vpc-private-subnet-${config.region}b`,
    properties: ({ config }) => ({
      AvailabilityZone: `${config.region}b`,
      NewBits: 8,
      NetworkNumber: 2,
    }),
    dependencies: ({}) => ({
      vpc: "inspection-vpc",
    }),
  },
  {
    type: "Subnet",
    group: "EC2",
    name: ({ config }) =>
      `inspection-vpc::inspection-vpc-private-subnet-${config.region}c`,
    properties: ({ config }) => ({
      AvailabilityZone: `${config.region}c`,
      NewBits: 8,
      NetworkNumber: 3,
    }),
    dependencies: ({}) => ({
      vpc: "inspection-vpc",
    }),
  },
  {
    type: "Subnet",
    group: "EC2",
    name: ({ config }) =>
      `inspection-vpc::inspection-vpc-public-subnet-${config.region}a`,
    properties: ({ config }) => ({
      AvailabilityZone: `${config.region}a`,
      NewBits: 8,
      NetworkNumber: 129,
    }),
    dependencies: ({}) => ({
      vpc: "inspection-vpc",
    }),
  },
  {
    type: "Subnet",
    group: "EC2",
    name: ({ config }) =>
      `inspection-vpc::inspection-vpc-public-subnet-${config.region}b`,
    properties: ({ config }) => ({
      AvailabilityZone: `${config.region}b`,
      NewBits: 8,
      NetworkNumber: 130,
    }),
    dependencies: ({}) => ({
      vpc: "inspection-vpc",
    }),
  },
  {
    type: "Subnet",
    group: "EC2",
    name: ({ config }) =>
      `inspection-vpc::inspection-vpc-public-subnet-${config.region}c`,
    properties: ({ config }) => ({
      AvailabilityZone: `${config.region}c`,
      NewBits: 8,
      NetworkNumber: 131,
    }),
    dependencies: ({}) => ({
      vpc: "inspection-vpc",
    }),
  },
  {
    type: "Subnet",
    group: "EC2",
    name: ({ config }) =>
      `spoke-vpc-1::spoke-vpc-1-intra-subnet-${config.region}a`,
    properties: ({ config }) => ({
      AvailabilityZone: `${config.region}a`,
      NewBits: 8,
      NetworkNumber: 200,
    }),
    dependencies: ({}) => ({
      vpc: "spoke-vpc-1",
    }),
  },
  {
    type: "Subnet",
    group: "EC2",
    name: ({ config }) =>
      `spoke-vpc-1::spoke-vpc-1-intra-subnet-${config.region}b`,
    properties: ({ config }) => ({
      AvailabilityZone: `${config.region}b`,
      NewBits: 8,
      NetworkNumber: 201,
    }),
    dependencies: ({}) => ({
      vpc: "spoke-vpc-1",
    }),
  },
  {
    type: "Subnet",
    group: "EC2",
    name: ({ config }) =>
      `spoke-vpc-1::spoke-vpc-1-intra-subnet-${config.region}c`,
    properties: ({ config }) => ({
      AvailabilityZone: `${config.region}c`,
      NewBits: 8,
      NetworkNumber: 202,
    }),
    dependencies: ({}) => ({
      vpc: "spoke-vpc-1",
    }),
  },
  {
    type: "Subnet",
    group: "EC2",
    name: ({ config }) =>
      `spoke-vpc-1::spoke-vpc-1-private-subnet-${config.region}a`,
    properties: ({ config }) => ({
      AvailabilityZone: `${config.region}a`,
      NewBits: 8,
      NetworkNumber: 1,
    }),
    dependencies: ({}) => ({
      vpc: "spoke-vpc-1",
    }),
  },
  {
    type: "Subnet",
    group: "EC2",
    name: ({ config }) =>
      `spoke-vpc-1::spoke-vpc-1-private-subnet-${config.region}b`,
    properties: ({ config }) => ({
      AvailabilityZone: `${config.region}b`,
      NewBits: 8,
      NetworkNumber: 2,
    }),
    dependencies: ({}) => ({
      vpc: "spoke-vpc-1",
    }),
  },
  {
    type: "Subnet",
    group: "EC2",
    name: ({ config }) =>
      `spoke-vpc-1::spoke-vpc-1-private-subnet-${config.region}c`,
    properties: ({ config }) => ({
      AvailabilityZone: `${config.region}c`,
      NewBits: 8,
      NetworkNumber: 3,
    }),
    dependencies: ({}) => ({
      vpc: "spoke-vpc-1",
    }),
  },
  {
    type: "Subnet",
    group: "EC2",
    name: ({ config }) =>
      `spoke-vpc-1::spoke-vpc-1-public-subnet-${config.region}a`,
    properties: ({ config }) => ({
      AvailabilityZone: `${config.region}a`,
      NewBits: 8,
      NetworkNumber: 129,
    }),
    dependencies: ({}) => ({
      vpc: "spoke-vpc-1",
    }),
  },
  {
    type: "Subnet",
    group: "EC2",
    name: ({ config }) =>
      `spoke-vpc-1::spoke-vpc-1-public-subnet-${config.region}b`,
    properties: ({ config }) => ({
      AvailabilityZone: `${config.region}b`,
      NewBits: 8,
      NetworkNumber: 130,
    }),
    dependencies: ({}) => ({
      vpc: "spoke-vpc-1",
    }),
  },
  {
    type: "Subnet",
    group: "EC2",
    name: ({ config }) =>
      `spoke-vpc-1::spoke-vpc-1-public-subnet-${config.region}c`,
    properties: ({ config }) => ({
      AvailabilityZone: `${config.region}c`,
      NewBits: 8,
      NetworkNumber: 131,
    }),
    dependencies: ({}) => ({
      vpc: "spoke-vpc-1",
    }),
  },
  {
    type: "Subnet",
    group: "EC2",
    name: ({ config }) =>
      `spoke-vpc-2::spoke-vpc-2-intra-subnet-${config.region}a`,
    properties: ({ config }) => ({
      AvailabilityZone: `${config.region}a`,
      NewBits: 8,
      NetworkNumber: 200,
    }),
    dependencies: ({}) => ({
      vpc: "spoke-vpc-2",
    }),
  },
  {
    type: "Subnet",
    group: "EC2",
    name: ({ config }) =>
      `spoke-vpc-2::spoke-vpc-2-intra-subnet-${config.region}b`,
    properties: ({ config }) => ({
      AvailabilityZone: `${config.region}b`,
      NewBits: 8,
      NetworkNumber: 201,
    }),
    dependencies: ({}) => ({
      vpc: "spoke-vpc-2",
    }),
  },
  {
    type: "Subnet",
    group: "EC2",
    name: ({ config }) =>
      `spoke-vpc-2::spoke-vpc-2-intra-subnet-${config.region}c`,
    properties: ({ config }) => ({
      AvailabilityZone: `${config.region}c`,
      NewBits: 8,
      NetworkNumber: 202,
    }),
    dependencies: ({}) => ({
      vpc: "spoke-vpc-2",
    }),
  },
  {
    type: "Subnet",
    group: "EC2",
    name: ({ config }) =>
      `spoke-vpc-2::spoke-vpc-2-private-subnet-${config.region}a`,
    properties: ({ config }) => ({
      AvailabilityZone: `${config.region}a`,
      NewBits: 8,
      NetworkNumber: 1,
    }),
    dependencies: ({}) => ({
      vpc: "spoke-vpc-2",
    }),
  },
  {
    type: "Subnet",
    group: "EC2",
    name: ({ config }) =>
      `spoke-vpc-2::spoke-vpc-2-private-subnet-${config.region}b`,
    properties: ({ config }) => ({
      AvailabilityZone: `${config.region}b`,
      NewBits: 8,
      NetworkNumber: 2,
    }),
    dependencies: ({}) => ({
      vpc: "spoke-vpc-2",
    }),
  },
  {
    type: "Subnet",
    group: "EC2",
    name: ({ config }) =>
      `spoke-vpc-2::spoke-vpc-2-private-subnet-${config.region}c`,
    properties: ({ config }) => ({
      AvailabilityZone: `${config.region}c`,
      NewBits: 8,
      NetworkNumber: 3,
    }),
    dependencies: ({}) => ({
      vpc: "spoke-vpc-2",
    }),
  },
  {
    type: "Subnet",
    group: "EC2",
    name: ({ config }) =>
      `spoke-vpc-2::spoke-vpc-2-public-subnet-${config.region}a`,
    properties: ({ config }) => ({
      AvailabilityZone: `${config.region}a`,
      NewBits: 8,
      NetworkNumber: 129,
    }),
    dependencies: ({}) => ({
      vpc: "spoke-vpc-2",
    }),
  },
  {
    type: "Subnet",
    group: "EC2",
    name: ({ config }) =>
      `spoke-vpc-2::spoke-vpc-2-public-subnet-${config.region}b`,
    properties: ({ config }) => ({
      AvailabilityZone: `${config.region}b`,
      NewBits: 8,
      NetworkNumber: 130,
    }),
    dependencies: ({}) => ({
      vpc: "spoke-vpc-2",
    }),
  },
  {
    type: "Subnet",
    group: "EC2",
    name: ({ config }) =>
      `spoke-vpc-2::spoke-vpc-2-public-subnet-${config.region}c`,
    properties: ({ config }) => ({
      AvailabilityZone: `${config.region}c`,
      NewBits: 8,
      NetworkNumber: 131,
    }),
    dependencies: ({}) => ({
      vpc: "spoke-vpc-2",
    }),
  },
  {
    type: "RouteTable",
    group: "EC2",
    name: "inspection-vpc::inspection-vpc-intra-subnet",
    dependencies: ({}) => ({
      vpc: "inspection-vpc",
    }),
  },
  {
    type: "RouteTable",
    group: "EC2",
    name: "inspection-vpc::inspection-vpc-private-subnet",
    dependencies: ({}) => ({
      vpc: "inspection-vpc",
    }),
  },
  {
    type: "RouteTable",
    group: "EC2",
    name: "inspection-vpc::inspection-vpc-public-subnet",
    dependencies: ({}) => ({
      vpc: "inspection-vpc",
    }),
  },
  {
    type: "RouteTable",
    group: "EC2",
    name: "spoke-vpc-1::spoke-vpc-1-intra-subnet",
    dependencies: ({}) => ({
      vpc: "spoke-vpc-1",
    }),
  },
  {
    type: "RouteTable",
    group: "EC2",
    name: "spoke-vpc-1::spoke-vpc-1-private-subnet",
    dependencies: ({}) => ({
      vpc: "spoke-vpc-1",
    }),
  },
  {
    type: "RouteTable",
    group: "EC2",
    name: "spoke-vpc-1::spoke-vpc-1-public-subnet",
    dependencies: ({}) => ({
      vpc: "spoke-vpc-1",
    }),
  },
  {
    type: "RouteTable",
    group: "EC2",
    name: "spoke-vpc-2::spoke-vpc-1-private-subnet",
    dependencies: ({}) => ({
      vpc: "spoke-vpc-2",
    }),
  },
  {
    type: "RouteTable",
    group: "EC2",
    name: "spoke-vpc-2::spoke-vpc-2-intra-subnet",
    dependencies: ({}) => ({
      vpc: "spoke-vpc-2",
    }),
  },
  {
    type: "RouteTable",
    group: "EC2",
    name: "spoke-vpc-2::spoke-vpc-2-public-subnet",
    dependencies: ({}) => ({
      vpc: "spoke-vpc-2",
    }),
  },
  {
    type: "RouteTableAssociation",
    group: "EC2",
    dependencies: ({ config }) => ({
      routeTable: "inspection-vpc::inspection-vpc-intra-subnet",
      subnet: `inspection-vpc::inspection-vpc-intra-subnet-${config.region}a`,
    }),
  },
  {
    type: "RouteTableAssociation",
    group: "EC2",
    dependencies: ({ config }) => ({
      routeTable: "inspection-vpc::inspection-vpc-intra-subnet",
      subnet: `inspection-vpc::inspection-vpc-intra-subnet-${config.region}b`,
    }),
  },
  {
    type: "RouteTableAssociation",
    group: "EC2",
    dependencies: ({ config }) => ({
      routeTable: "inspection-vpc::inspection-vpc-intra-subnet",
      subnet: `inspection-vpc::inspection-vpc-intra-subnet-${config.region}c`,
    }),
  },
  {
    type: "RouteTableAssociation",
    group: "EC2",
    dependencies: ({ config }) => ({
      routeTable: "inspection-vpc::inspection-vpc-private-subnet",
      subnet: `inspection-vpc::inspection-vpc-private-subnet-${config.region}a`,
    }),
  },
  {
    type: "RouteTableAssociation",
    group: "EC2",
    dependencies: ({ config }) => ({
      routeTable: "inspection-vpc::inspection-vpc-private-subnet",
      subnet: `inspection-vpc::inspection-vpc-private-subnet-${config.region}b`,
    }),
  },
  {
    type: "RouteTableAssociation",
    group: "EC2",
    dependencies: ({ config }) => ({
      routeTable: "inspection-vpc::inspection-vpc-private-subnet",
      subnet: `inspection-vpc::inspection-vpc-private-subnet-${config.region}c`,
    }),
  },
  {
    type: "RouteTableAssociation",
    group: "EC2",
    dependencies: ({ config }) => ({
      routeTable: "inspection-vpc::inspection-vpc-public-subnet",
      subnet: `inspection-vpc::inspection-vpc-public-subnet-${config.region}a`,
    }),
  },
  {
    type: "RouteTableAssociation",
    group: "EC2",
    dependencies: ({ config }) => ({
      routeTable: "inspection-vpc::inspection-vpc-public-subnet",
      subnet: `inspection-vpc::inspection-vpc-public-subnet-${config.region}b`,
    }),
  },
  {
    type: "RouteTableAssociation",
    group: "EC2",
    dependencies: ({ config }) => ({
      routeTable: "inspection-vpc::inspection-vpc-public-subnet",
      subnet: `inspection-vpc::inspection-vpc-public-subnet-${config.region}c`,
    }),
  },
  {
    type: "RouteTableAssociation",
    group: "EC2",
    dependencies: ({ config }) => ({
      routeTable: "spoke-vpc-1::spoke-vpc-1-intra-subnet",
      subnet: `spoke-vpc-1::spoke-vpc-1-intra-subnet-${config.region}a`,
    }),
  },
  {
    type: "RouteTableAssociation",
    group: "EC2",
    dependencies: ({ config }) => ({
      routeTable: "spoke-vpc-1::spoke-vpc-1-intra-subnet",
      subnet: `spoke-vpc-1::spoke-vpc-1-intra-subnet-${config.region}b`,
    }),
  },
  {
    type: "RouteTableAssociation",
    group: "EC2",
    dependencies: ({ config }) => ({
      routeTable: "spoke-vpc-1::spoke-vpc-1-intra-subnet",
      subnet: `spoke-vpc-1::spoke-vpc-1-intra-subnet-${config.region}c`,
    }),
  },
  {
    type: "RouteTableAssociation",
    group: "EC2",
    dependencies: ({ config }) => ({
      routeTable: "spoke-vpc-1::spoke-vpc-1-private-subnet",
      subnet: `spoke-vpc-1::spoke-vpc-1-private-subnet-${config.region}a`,
    }),
  },
  {
    type: "RouteTableAssociation",
    group: "EC2",
    dependencies: ({ config }) => ({
      routeTable: "spoke-vpc-1::spoke-vpc-1-private-subnet",
      subnet: `spoke-vpc-1::spoke-vpc-1-private-subnet-${config.region}b`,
    }),
  },
  {
    type: "RouteTableAssociation",
    group: "EC2",
    dependencies: ({ config }) => ({
      routeTable: "spoke-vpc-1::spoke-vpc-1-private-subnet",
      subnet: `spoke-vpc-1::spoke-vpc-1-private-subnet-${config.region}c`,
    }),
  },
  {
    type: "RouteTableAssociation",
    group: "EC2",
    dependencies: ({ config }) => ({
      routeTable: "spoke-vpc-1::spoke-vpc-1-public-subnet",
      subnet: `spoke-vpc-1::spoke-vpc-1-public-subnet-${config.region}a`,
    }),
  },
  {
    type: "RouteTableAssociation",
    group: "EC2",
    dependencies: ({ config }) => ({
      routeTable: "spoke-vpc-1::spoke-vpc-1-public-subnet",
      subnet: `spoke-vpc-1::spoke-vpc-1-public-subnet-${config.region}b`,
    }),
  },
  {
    type: "RouteTableAssociation",
    group: "EC2",
    dependencies: ({ config }) => ({
      routeTable: "spoke-vpc-1::spoke-vpc-1-public-subnet",
      subnet: `spoke-vpc-1::spoke-vpc-1-public-subnet-${config.region}c`,
    }),
  },
  {
    type: "RouteTableAssociation",
    group: "EC2",
    dependencies: ({ config }) => ({
      routeTable: "spoke-vpc-2::spoke-vpc-1-private-subnet",
      subnet: `spoke-vpc-2::spoke-vpc-2-private-subnet-${config.region}a`,
    }),
  },
  {
    type: "RouteTableAssociation",
    group: "EC2",
    dependencies: ({ config }) => ({
      routeTable: "spoke-vpc-2::spoke-vpc-1-private-subnet",
      subnet: `spoke-vpc-2::spoke-vpc-2-private-subnet-${config.region}b`,
    }),
  },
  {
    type: "RouteTableAssociation",
    group: "EC2",
    dependencies: ({ config }) => ({
      routeTable: "spoke-vpc-2::spoke-vpc-1-private-subnet",
      subnet: `spoke-vpc-2::spoke-vpc-2-private-subnet-${config.region}c`,
    }),
  },
  {
    type: "RouteTableAssociation",
    group: "EC2",
    dependencies: ({ config }) => ({
      routeTable: "spoke-vpc-2::spoke-vpc-2-intra-subnet",
      subnet: `spoke-vpc-2::spoke-vpc-2-intra-subnet-${config.region}a`,
    }),
  },
  {
    type: "RouteTableAssociation",
    group: "EC2",
    dependencies: ({ config }) => ({
      routeTable: "spoke-vpc-2::spoke-vpc-2-intra-subnet",
      subnet: `spoke-vpc-2::spoke-vpc-2-intra-subnet-${config.region}b`,
    }),
  },
  {
    type: "RouteTableAssociation",
    group: "EC2",
    dependencies: ({ config }) => ({
      routeTable: "spoke-vpc-2::spoke-vpc-2-intra-subnet",
      subnet: `spoke-vpc-2::spoke-vpc-2-intra-subnet-${config.region}c`,
    }),
  },
  {
    type: "RouteTableAssociation",
    group: "EC2",
    dependencies: ({ config }) => ({
      routeTable: "spoke-vpc-2::spoke-vpc-2-public-subnet",
      subnet: `spoke-vpc-2::spoke-vpc-2-public-subnet-${config.region}a`,
    }),
  },
  {
    type: "RouteTableAssociation",
    group: "EC2",
    dependencies: ({ config }) => ({
      routeTable: "spoke-vpc-2::spoke-vpc-2-public-subnet",
      subnet: `spoke-vpc-2::spoke-vpc-2-public-subnet-${config.region}b`,
    }),
  },
  {
    type: "RouteTableAssociation",
    group: "EC2",
    dependencies: ({ config }) => ({
      routeTable: "spoke-vpc-2::spoke-vpc-2-public-subnet",
      subnet: `spoke-vpc-2::spoke-vpc-2-public-subnet-${config.region}c`,
    }),
  },
  {
    type: "Route",
    group: "EC2",
    properties: ({}) => ({
      DestinationCidrBlock: "0.0.0.0/0",
    }),
    dependencies: ({ config }) => ({
      routeTable: "inspection-vpc::inspection-vpc-intra-subnet",
      vpcEndpoint: `vpce::NetworkFirewall::inspection-vpc::inspection-vpc-private-subnet-${config.region}b`,
    }),
  },
  {
    type: "Route",
    group: "EC2",
    properties: ({}) => ({
      DestinationCidrBlock: "0.0.0.0/0",
    }),
    dependencies: ({ config }) => ({
      routeTable: "inspection-vpc::inspection-vpc-private-subnet",
      natGateway: `inspection-vpc-${config.region}a`,
    }),
  },
  {
    type: "Route",
    group: "EC2",
    properties: ({}) => ({
      DestinationCidrBlock: "10.11.0.0/16",
    }),
    dependencies: ({}) => ({
      routeTable: "inspection-vpc::inspection-vpc-private-subnet",
      transitGateway: "terraform-transit-gateway",
    }),
  },
  {
    type: "Route",
    group: "EC2",
    properties: ({}) => ({
      DestinationCidrBlock: "10.12.0.0/16",
    }),
    dependencies: ({}) => ({
      routeTable: "inspection-vpc::inspection-vpc-private-subnet",
      transitGateway: "terraform-transit-gateway",
    }),
  },
  {
    type: "Route",
    group: "EC2",
    properties: ({}) => ({
      DestinationCidrBlock: "0.0.0.0/0",
    }),
    dependencies: ({}) => ({
      routeTable: "inspection-vpc::inspection-vpc-public-subnet",
      ig: "inspection-vpc",
    }),
  },
  {
    type: "Route",
    group: "EC2",
    properties: ({}) => ({
      DestinationCidrBlock: "10.11.0.0/16",
    }),
    dependencies: ({ config }) => ({
      routeTable: "inspection-vpc::inspection-vpc-public-subnet",
      vpcEndpoint: `vpce::NetworkFirewall::inspection-vpc::inspection-vpc-private-subnet-${config.region}b`,
    }),
  },
  {
    type: "Route",
    group: "EC2",
    properties: ({}) => ({
      DestinationCidrBlock: "10.12.0.0/16",
    }),
    dependencies: ({ config }) => ({
      routeTable: "inspection-vpc::inspection-vpc-public-subnet",
      vpcEndpoint: `vpce::NetworkFirewall::inspection-vpc::inspection-vpc-private-subnet-${config.region}b`,
    }),
  },
  {
    type: "Route",
    group: "EC2",
    properties: ({}) => ({
      DestinationCidrBlock: "0.0.0.0/0",
    }),
    dependencies: ({}) => ({
      routeTable: "spoke-vpc-1::spoke-vpc-1-intra-subnet",
      transitGateway: "terraform-transit-gateway",
    }),
  },
  {
    type: "Route",
    group: "EC2",
    properties: ({}) => ({
      DestinationCidrBlock: "0.0.0.0/0",
    }),
    dependencies: ({}) => ({
      routeTable: "spoke-vpc-1::spoke-vpc-1-private-subnet",
      transitGateway: "terraform-transit-gateway",
    }),
  },
  {
    type: "Route",
    group: "EC2",
    properties: ({}) => ({
      DestinationCidrBlock: "0.0.0.0/0",
    }),
    dependencies: ({}) => ({
      routeTable: "spoke-vpc-1::spoke-vpc-1-public-subnet",
      transitGateway: "terraform-transit-gateway",
    }),
  },
  {
    type: "Route",
    group: "EC2",
    properties: ({}) => ({
      DestinationCidrBlock: "0.0.0.0/0",
    }),
    dependencies: ({}) => ({
      routeTable: "spoke-vpc-2::spoke-vpc-1-private-subnet",
      transitGateway: "terraform-transit-gateway",
    }),
  },
  {
    type: "Route",
    group: "EC2",
    properties: ({}) => ({
      DestinationCidrBlock: "0.0.0.0/0",
    }),
    dependencies: ({}) => ({
      routeTable: "spoke-vpc-2::spoke-vpc-2-intra-subnet",
      transitGateway: "terraform-transit-gateway",
    }),
  },
  {
    type: "Route",
    group: "EC2",
    properties: ({}) => ({
      DestinationCidrBlock: "0.0.0.0/0",
    }),
    dependencies: ({}) => ({
      routeTable: "spoke-vpc-2::spoke-vpc-2-public-subnet",
      transitGateway: "terraform-transit-gateway",
    }),
  },
  {
    type: "SecurityGroup",
    group: "EC2",
    properties: ({}) => ({
      GroupName: "public_vpc_security_group",
      Description: "ingress access",
    }),
    dependencies: ({}) => ({
      vpc: "inspection-vpc",
    }),
  },
  {
    type: "SecurityGroup",
    group: "EC2",
    properties: ({}) => ({
      GroupName: "endoint_security_group",
      Description: "ingress access",
    }),
    dependencies: ({}) => ({
      vpc: "spoke-vpc-1",
    }),
  },
  {
    type: "SecurityGroup",
    group: "EC2",
    properties: ({}) => ({
      GroupName: "public_instance_security_group",
      Description: "ingress access",
    }),
    dependencies: ({}) => ({
      vpc: "spoke-vpc-1",
    }),
  },
  {
    type: "SecurityGroup",
    group: "EC2",
    properties: ({}) => ({
      GroupName: "public_vpc_security_group",
      Description: "ingress access",
    }),
    dependencies: ({}) => ({
      vpc: "spoke-vpc-1",
    }),
  },
  {
    type: "SecurityGroup",
    group: "EC2",
    properties: ({}) => ({
      GroupName: "endoint_security_group",
      Description: "ingress access",
    }),
    dependencies: ({}) => ({
      vpc: "spoke-vpc-2",
    }),
  },
  {
    type: "SecurityGroup",
    group: "EC2",
    properties: ({}) => ({
      GroupName: "public_instance_security_group",
      Description: "ingress access",
    }),
    dependencies: ({}) => ({
      vpc: "spoke-vpc-2",
    }),
  },
  {
    type: "SecurityGroup",
    group: "EC2",
    properties: ({}) => ({
      GroupName: "public_vpc_security_group",
      Description: "ingress access",
    }),
    dependencies: ({}) => ({
      vpc: "spoke-vpc-2",
    }),
  },
  {
    type: "SecurityGroupRuleIngress",
    group: "EC2",
    properties: ({}) => ({
      IpPermission: {
        IpProtocol: "-1",
        IpRanges: [
          {
            CidrIp: "192.168.1.0/24",
            Description: "Open to the provider client IP address",
          },
        ],
      },
    }),
    dependencies: ({}) => ({
      securityGroup: "sg::inspection-vpc::public_vpc_security_group",
    }),
  },
  {
    type: "SecurityGroupRuleIngress",
    group: "EC2",
    properties: ({}) => ({
      IpPermission: {
        FromPort: 22,
        IpProtocol: "tcp",
        IpRanges: [
          {
            CidrIp: "0.0.0.0/0",
            Description: "SSH access",
          },
        ],
        ToPort: 22,
      },
    }),
    dependencies: ({}) => ({
      securityGroup: "sg::inspection-vpc::public_vpc_security_group",
    }),
  },
  {
    type: "SecurityGroupRuleIngress",
    group: "EC2",
    properties: ({}) => ({
      IpPermission: {
        FromPort: 80,
        IpProtocol: "tcp",
        IpRanges: [
          {
            CidrIp: "0.0.0.0/0",
            Description: "HTTP access",
          },
        ],
        ToPort: 80,
      },
    }),
    dependencies: ({}) => ({
      securityGroup: "sg::inspection-vpc::public_vpc_security_group",
    }),
  },
  {
    type: "SecurityGroupRuleIngress",
    group: "EC2",
    properties: ({}) => ({
      IpPermission: {
        IpProtocol: "-1",
        IpRanges: [
          {
            CidrIp: "0.0.0.0/0",
          },
        ],
      },
    }),
    dependencies: ({}) => ({
      securityGroup: "sg::spoke-vpc-1::endoint_security_group",
    }),
  },
  {
    type: "SecurityGroupRuleIngress",
    group: "EC2",
    properties: ({}) => ({
      IpPermission: {
        IpProtocol: "-1",
        IpRanges: [
          {
            CidrIp: "192.168.1.0/24",
          },
        ],
      },
    }),
    dependencies: ({}) => ({
      securityGroup: "sg::spoke-vpc-1::public_instance_security_group",
    }),
  },
  {
    type: "SecurityGroupRuleIngress",
    group: "EC2",
    properties: ({}) => ({
      IpPermission: {
        FromPort: 22,
        IpProtocol: "tcp",
        IpRanges: [
          {
            CidrIp: "0.0.0.0/0",
          },
        ],
        ToPort: 22,
      },
    }),
    dependencies: ({}) => ({
      securityGroup: "sg::spoke-vpc-1::public_instance_security_group",
    }),
  },
  {
    type: "SecurityGroupRuleIngress",
    group: "EC2",
    properties: ({}) => ({
      IpPermission: {
        FromPort: 80,
        IpProtocol: "tcp",
        IpRanges: [
          {
            CidrIp: "0.0.0.0/0",
          },
        ],
        ToPort: 80,
      },
    }),
    dependencies: ({}) => ({
      securityGroup: "sg::spoke-vpc-1::public_instance_security_group",
    }),
  },
  {
    type: "SecurityGroupRuleIngress",
    group: "EC2",
    properties: ({}) => ({
      IpPermission: {
        IpProtocol: "-1",
        IpRanges: [
          {
            CidrIp: "192.168.1.0/24",
            Description: "Open to the provider client IP address",
          },
        ],
      },
    }),
    dependencies: ({}) => ({
      securityGroup: "sg::spoke-vpc-1::public_vpc_security_group",
    }),
  },
  {
    type: "SecurityGroupRuleIngress",
    group: "EC2",
    properties: ({}) => ({
      IpPermission: {
        FromPort: 22,
        IpProtocol: "tcp",
        IpRanges: [
          {
            CidrIp: "0.0.0.0/0",
            Description: "SSH access",
          },
        ],
        ToPort: 22,
      },
    }),
    dependencies: ({}) => ({
      securityGroup: "sg::spoke-vpc-1::public_vpc_security_group",
    }),
  },
  {
    type: "SecurityGroupRuleIngress",
    group: "EC2",
    properties: ({}) => ({
      IpPermission: {
        FromPort: 80,
        IpProtocol: "tcp",
        IpRanges: [
          {
            CidrIp: "0.0.0.0/0",
            Description: "HTTP access",
          },
        ],
        ToPort: 80,
      },
    }),
    dependencies: ({}) => ({
      securityGroup: "sg::spoke-vpc-1::public_vpc_security_group",
    }),
  },
  {
    type: "SecurityGroupRuleIngress",
    group: "EC2",
    properties: ({}) => ({
      IpPermission: {
        IpProtocol: "-1",
        IpRanges: [
          {
            CidrIp: "0.0.0.0/0",
          },
        ],
      },
    }),
    dependencies: ({}) => ({
      securityGroup: "sg::spoke-vpc-2::endoint_security_group",
    }),
  },
  {
    type: "SecurityGroupRuleIngress",
    group: "EC2",
    properties: ({}) => ({
      IpPermission: {
        IpProtocol: "-1",
        IpRanges: [
          {
            CidrIp: "192.168.1.0/24",
          },
        ],
      },
    }),
    dependencies: ({}) => ({
      securityGroup: "sg::spoke-vpc-2::public_instance_security_group",
    }),
  },
  {
    type: "SecurityGroupRuleIngress",
    group: "EC2",
    properties: ({}) => ({
      IpPermission: {
        FromPort: 22,
        IpProtocol: "tcp",
        IpRanges: [
          {
            CidrIp: "0.0.0.0/0",
          },
        ],
        ToPort: 22,
      },
    }),
    dependencies: ({}) => ({
      securityGroup: "sg::spoke-vpc-2::public_instance_security_group",
    }),
  },
  {
    type: "SecurityGroupRuleIngress",
    group: "EC2",
    properties: ({}) => ({
      IpPermission: {
        FromPort: 80,
        IpProtocol: "tcp",
        IpRanges: [
          {
            CidrIp: "0.0.0.0/0",
          },
        ],
        ToPort: 80,
      },
    }),
    dependencies: ({}) => ({
      securityGroup: "sg::spoke-vpc-2::public_instance_security_group",
    }),
  },
  {
    type: "SecurityGroupRuleIngress",
    group: "EC2",
    properties: ({}) => ({
      IpPermission: {
        IpProtocol: "-1",
        IpRanges: [
          {
            CidrIp: "192.168.1.0/24",
            Description: "Open to the provider client IP address",
          },
        ],
      },
    }),
    dependencies: ({}) => ({
      securityGroup: "sg::spoke-vpc-2::public_vpc_security_group",
    }),
  },
  {
    type: "SecurityGroupRuleIngress",
    group: "EC2",
    properties: ({}) => ({
      IpPermission: {
        FromPort: 22,
        IpProtocol: "tcp",
        IpRanges: [
          {
            CidrIp: "0.0.0.0/0",
            Description: "SSH access",
          },
        ],
        ToPort: 22,
      },
    }),
    dependencies: ({}) => ({
      securityGroup: "sg::spoke-vpc-2::public_vpc_security_group",
    }),
  },
  {
    type: "SecurityGroupRuleIngress",
    group: "EC2",
    properties: ({}) => ({
      IpPermission: {
        FromPort: 80,
        IpProtocol: "tcp",
        IpRanges: [
          {
            CidrIp: "0.0.0.0/0",
            Description: "HTTP access",
          },
        ],
        ToPort: 80,
      },
    }),
    dependencies: ({}) => ({
      securityGroup: "sg::spoke-vpc-2::public_vpc_security_group",
    }),
  },
  {
    type: "ElasticIpAddress",
    group: "EC2",
    name: ({ config }) => `inspection-vpc-${config.region}a`,
  },
  {
    type: "Instance",
    group: "EC2",
    name: "spoke-vpc-1-instance-1",
    properties: ({ config, getId }) => ({
      InstanceType: "t2.micro",
      Placement: {
        AvailabilityZone: `${config.region}a`,
      },
      NetworkInterfaces: [
        {
          DeviceIndex: 0,
          Groups: [
            `${getId({
              type: "SecurityGroup",
              group: "EC2",
              name: "sg::spoke-vpc-1::public_instance_security_group",
            })}`,
          ],
          SubnetId: `${getId({
            type: "Subnet",
            group: "EC2",
            name: `spoke-vpc-1::spoke-vpc-1-private-subnet-${config.region}a`,
          })}`,
        },
      ],
      Image: {
        Description: "Amazon Linux AMI 2018.03.0.20220503.0 x86_64 HVM gp2",
      },
    }),
    dependencies: ({ config }) => ({
      subnets: [`spoke-vpc-1::spoke-vpc-1-private-subnet-${config.region}a`],
      keyPair: "large-badger",
      iamInstanceProfile: "terraform-ssm-ec2",
      securityGroups: ["sg::spoke-vpc-1::public_instance_security_group"],
    }),
  },
  {
    type: "Instance",
    group: "EC2",
    name: "spoke-vpc-2-instance-1",
    properties: ({ config, getId }) => ({
      InstanceType: "t2.micro",
      Placement: {
        AvailabilityZone: `${config.region}a`,
      },
      NetworkInterfaces: [
        {
          DeviceIndex: 0,
          Groups: [
            `${getId({
              type: "SecurityGroup",
              group: "EC2",
              name: "sg::spoke-vpc-2::public_instance_security_group",
            })}`,
          ],
          SubnetId: `${getId({
            type: "Subnet",
            group: "EC2",
            name: `spoke-vpc-2::spoke-vpc-2-private-subnet-${config.region}a`,
          })}`,
        },
      ],
      Image: {
        Description: "Amazon Linux AMI 2018.03.0.20220503.0 x86_64 HVM gp2",
      },
    }),
    dependencies: ({ config }) => ({
      subnets: [`spoke-vpc-2::spoke-vpc-2-private-subnet-${config.region}a`],
      keyPair: "large-badger",
      iamInstanceProfile: "terraform-ssm-ec2",
      securityGroups: ["sg::spoke-vpc-2::public_instance_security_group"],
    }),
  },
  {
    type: "VpcEndpoint",
    group: "EC2",
    name: ({ config }) =>
      `vpce::NetworkFirewall::inspection-vpc::inspection-vpc-private-subnet-${config.region}b`,
    readOnly: true,
    dependencies: ({ config }) => ({
      vpc: "inspection-vpc",
      subnets: [
        `inspection-vpc::inspection-vpc-private-subnet-${config.region}b`,
      ],
      firewall: "NetworkFirewall",
    }),
  },
  {
    type: "VpcEndpoint",
    group: "EC2",
    name: ({ config }) =>
      `vpce::spoke-vpc-1::com.amazonaws.${config.region}.ec2`,
    properties: ({ config }) => ({
      PolicyDocument: {
        Statement: [
          {
            Action: "*",
            Effect: "Allow",
            Principal: "*",
            Resource: `*`,
          },
        ],
      },
      PrivateDnsEnabled: true,
      RequesterManaged: false,
      VpcEndpointType: "Interface",
      ServiceName: `com.amazonaws.${config.region}.ec2`,
    }),
    dependencies: ({ config }) => ({
      vpc: "spoke-vpc-1",
      subnets: [
        `spoke-vpc-1::spoke-vpc-1-private-subnet-${config.region}a`,
        `spoke-vpc-1::spoke-vpc-1-private-subnet-${config.region}b`,
        `spoke-vpc-1::spoke-vpc-1-private-subnet-${config.region}c`,
      ],
    }),
  },
  {
    type: "VpcEndpoint",
    group: "EC2",
    name: ({ config }) =>
      `vpce::spoke-vpc-1::com.amazonaws.${config.region}.ec2messages`,
    properties: ({ config }) => ({
      PolicyDocument: {
        Statement: [
          {
            Action: "*",
            Effect: "Allow",
            Principal: "*",
            Resource: `*`,
          },
        ],
      },
      PrivateDnsEnabled: true,
      RequesterManaged: false,
      VpcEndpointType: "Interface",
      ServiceName: `com.amazonaws.${config.region}.ec2messages`,
    }),
    dependencies: ({ config }) => ({
      vpc: "spoke-vpc-1",
      subnets: [
        `spoke-vpc-1::spoke-vpc-1-private-subnet-${config.region}a`,
        `spoke-vpc-1::spoke-vpc-1-private-subnet-${config.region}b`,
        `spoke-vpc-1::spoke-vpc-1-private-subnet-${config.region}c`,
      ],
    }),
  },
  {
    type: "VpcEndpoint",
    group: "EC2",
    name: ({ config }) =>
      `vpce::spoke-vpc-1::com.amazonaws.${config.region}.ssm`,
    properties: ({ config }) => ({
      PolicyDocument: {
        Statement: [
          {
            Action: "*",
            Effect: "Allow",
            Principal: "*",
            Resource: `*`,
          },
        ],
      },
      PrivateDnsEnabled: true,
      RequesterManaged: false,
      VpcEndpointType: "Interface",
      ServiceName: `com.amazonaws.${config.region}.ssm`,
    }),
    dependencies: ({ config }) => ({
      vpc: "spoke-vpc-1",
      subnets: [
        `spoke-vpc-1::spoke-vpc-1-private-subnet-${config.region}a`,
        `spoke-vpc-1::spoke-vpc-1-private-subnet-${config.region}b`,
        `spoke-vpc-1::spoke-vpc-1-private-subnet-${config.region}c`,
      ],
    }),
  },
  {
    type: "VpcEndpoint",
    group: "EC2",
    name: ({ config }) =>
      `vpce::spoke-vpc-1::com.amazonaws.${config.region}.ssmmessages`,
    properties: ({ config }) => ({
      PolicyDocument: {
        Statement: [
          {
            Action: "*",
            Effect: "Allow",
            Principal: "*",
            Resource: `*`,
          },
        ],
      },
      PrivateDnsEnabled: true,
      RequesterManaged: false,
      VpcEndpointType: "Interface",
      ServiceName: `com.amazonaws.${config.region}.ssmmessages`,
    }),
    dependencies: ({ config }) => ({
      vpc: "spoke-vpc-1",
      subnets: [
        `spoke-vpc-1::spoke-vpc-1-private-subnet-${config.region}a`,
        `spoke-vpc-1::spoke-vpc-1-private-subnet-${config.region}b`,
        `spoke-vpc-1::spoke-vpc-1-private-subnet-${config.region}c`,
      ],
    }),
  },
  {
    type: "VpcEndpoint",
    group: "EC2",
    name: ({ config }) =>
      `vpce::spoke-vpc-2::com.amazonaws.${config.region}.ec2`,
    properties: ({ config }) => ({
      PolicyDocument: {
        Statement: [
          {
            Action: "*",
            Effect: "Allow",
            Principal: "*",
            Resource: `*`,
          },
        ],
      },
      PrivateDnsEnabled: true,
      RequesterManaged: false,
      VpcEndpointType: "Interface",
      ServiceName: `com.amazonaws.${config.region}.ec2`,
    }),
    dependencies: ({ config }) => ({
      vpc: "spoke-vpc-2",
      subnets: [
        `spoke-vpc-2::spoke-vpc-2-private-subnet-${config.region}a`,
        `spoke-vpc-2::spoke-vpc-2-private-subnet-${config.region}b`,
        `spoke-vpc-2::spoke-vpc-2-private-subnet-${config.region}c`,
      ],
    }),
  },
  {
    type: "VpcEndpoint",
    group: "EC2",
    name: ({ config }) =>
      `vpce::spoke-vpc-2::com.amazonaws.${config.region}.ec2messages`,
    properties: ({ config }) => ({
      PolicyDocument: {
        Statement: [
          {
            Action: "*",
            Effect: "Allow",
            Principal: "*",
            Resource: `*`,
          },
        ],
      },
      PrivateDnsEnabled: true,
      RequesterManaged: false,
      VpcEndpointType: "Interface",
      ServiceName: `com.amazonaws.${config.region}.ec2messages`,
    }),
    dependencies: ({ config }) => ({
      vpc: "spoke-vpc-2",
      subnets: [
        `spoke-vpc-2::spoke-vpc-2-private-subnet-${config.region}a`,
        `spoke-vpc-2::spoke-vpc-2-private-subnet-${config.region}b`,
        `spoke-vpc-2::spoke-vpc-2-private-subnet-${config.region}c`,
      ],
    }),
  },
  {
    type: "VpcEndpoint",
    group: "EC2",
    name: ({ config }) =>
      `vpce::spoke-vpc-2::com.amazonaws.${config.region}.ssm`,
    properties: ({ config }) => ({
      PolicyDocument: {
        Statement: [
          {
            Action: "*",
            Effect: "Allow",
            Principal: "*",
            Resource: `*`,
          },
        ],
      },
      PrivateDnsEnabled: true,
      RequesterManaged: false,
      VpcEndpointType: "Interface",
      ServiceName: `com.amazonaws.${config.region}.ssm`,
    }),
    dependencies: ({ config }) => ({
      vpc: "spoke-vpc-2",
      subnets: [
        `spoke-vpc-2::spoke-vpc-2-private-subnet-${config.region}a`,
        `spoke-vpc-2::spoke-vpc-2-private-subnet-${config.region}b`,
        `spoke-vpc-2::spoke-vpc-2-private-subnet-${config.region}c`,
      ],
    }),
  },
  {
    type: "VpcEndpoint",
    group: "EC2",
    name: ({ config }) =>
      `vpce::spoke-vpc-2::com.amazonaws.${config.region}.ssmmessages`,
    properties: ({ config }) => ({
      PolicyDocument: {
        Statement: [
          {
            Action: "*",
            Effect: "Allow",
            Principal: "*",
            Resource: `*`,
          },
        ],
      },
      PrivateDnsEnabled: true,
      RequesterManaged: false,
      VpcEndpointType: "Interface",
      ServiceName: `com.amazonaws.${config.region}.ssmmessages`,
    }),
    dependencies: ({ config }) => ({
      vpc: "spoke-vpc-2",
      subnets: [
        `spoke-vpc-2::spoke-vpc-2-private-subnet-${config.region}a`,
        `spoke-vpc-2::spoke-vpc-2-private-subnet-${config.region}b`,
        `spoke-vpc-2::spoke-vpc-2-private-subnet-${config.region}c`,
      ],
    }),
  },
  {
    type: "TransitGateway",
    group: "EC2",
    name: "terraform-transit-gateway",
    properties: ({}) => ({
      Description: "Transit Gateway",
      Options: {
        AmazonSideAsn: 64512,
        AutoAcceptSharedAttachments: "disable",
        DefaultRouteTableAssociation: "disable",
        DefaultRouteTablePropagation: "disable",
        VpnEcmpSupport: "enable",
        DnsSupport: "enable",
        MulticastSupport: "disable",
      },
    }),
  },
  {
    type: "TransitGatewayRoute",
    group: "EC2",
    properties: ({}) => ({
      DestinationCidrBlock: "0.0.0.0/0",
    }),
    dependencies: ({}) => ({
      transitGatewayRouteTable: "Spoke_VPC_Route_Table",
      transitGatewayVpcAttachment: "inspection-vpc-attachment",
    }),
  },
  {
    type: "TransitGatewayRouteTable",
    group: "EC2",
    name: "Inspection_VPC_Route_Table",
    properties: ({}) => ({
      DefaultAssociationRouteTable: false,
      DefaultPropagationRouteTable: false,
    }),
    dependencies: ({}) => ({
      transitGateway: "terraform-transit-gateway",
    }),
  },
  {
    type: "TransitGatewayRouteTable",
    group: "EC2",
    name: "Spoke_VPC_Route_Table",
    properties: ({}) => ({
      DefaultAssociationRouteTable: false,
      DefaultPropagationRouteTable: false,
    }),
    dependencies: ({}) => ({
      transitGateway: "terraform-transit-gateway",
    }),
  },
  {
    type: "TransitGatewayVpcAttachment",
    group: "EC2",
    name: "inspection-vpc-attachment",
    properties: ({}) => ({
      Options: {
        DnsSupport: "enable",
        Ipv6Support: "disable",
        ApplianceModeSupport: "disable",
      },
    }),
    dependencies: ({ config }) => ({
      transitGateway: "terraform-transit-gateway",
      vpc: "inspection-vpc",
      subnets: [
        `inspection-vpc::inspection-vpc-intra-subnet-${config.region}a`,
        `inspection-vpc::inspection-vpc-intra-subnet-${config.region}b`,
        `inspection-vpc::inspection-vpc-intra-subnet-${config.region}c`,
      ],
    }),
  },
  {
    type: "TransitGatewayVpcAttachment",
    group: "EC2",
    name: "spoke-vpc-1-attachment",
    properties: ({}) => ({
      Options: {
        DnsSupport: "enable",
        Ipv6Support: "disable",
        ApplianceModeSupport: "disable",
      },
    }),
    dependencies: ({ config }) => ({
      transitGateway: "terraform-transit-gateway",
      vpc: "spoke-vpc-1",
      subnets: [
        `spoke-vpc-1::spoke-vpc-1-intra-subnet-${config.region}a`,
        `spoke-vpc-1::spoke-vpc-1-intra-subnet-${config.region}b`,
        `spoke-vpc-1::spoke-vpc-1-intra-subnet-${config.region}c`,
      ],
    }),
  },
  {
    type: "TransitGatewayVpcAttachment",
    group: "EC2",
    name: "spoke-vpc-2-attachment",
    properties: ({}) => ({
      Options: {
        DnsSupport: "enable",
        Ipv6Support: "disable",
        ApplianceModeSupport: "disable",
      },
    }),
    dependencies: ({ config }) => ({
      transitGateway: "terraform-transit-gateway",
      vpc: "spoke-vpc-2",
      subnets: [
        `spoke-vpc-2::spoke-vpc-2-intra-subnet-${config.region}a`,
        `spoke-vpc-2::spoke-vpc-2-intra-subnet-${config.region}b`,
        `spoke-vpc-2::spoke-vpc-2-intra-subnet-${config.region}c`,
      ],
    }),
  },
  {
    type: "TransitGatewayRouteTableAssociation",
    group: "EC2",
    dependencies: ({}) => ({
      transitGatewayRouteTable: "Inspection_VPC_Route_Table",
      transitGatewayVpcAttachment: "inspection-vpc-attachment",
    }),
  },
  {
    type: "TransitGatewayRouteTableAssociation",
    group: "EC2",
    dependencies: ({}) => ({
      transitGatewayRouteTable: "Spoke_VPC_Route_Table",
      transitGatewayVpcAttachment: "spoke-vpc-1-attachment",
    }),
  },
  {
    type: "TransitGatewayRouteTableAssociation",
    group: "EC2",
    dependencies: ({}) => ({
      transitGatewayRouteTable: "Spoke_VPC_Route_Table",
      transitGatewayVpcAttachment: "spoke-vpc-2-attachment",
    }),
  },
  {
    type: "TransitGatewayRouteTablePropagation",
    group: "EC2",
    dependencies: ({}) => ({
      transitGatewayRouteTable: "Spoke_VPC_Route_Table",
      transitGatewayVpcAttachment: "inspection-vpc-attachment",
    }),
  },
  {
    type: "TransitGatewayRouteTablePropagation",
    group: "EC2",
    dependencies: ({}) => ({
      transitGatewayRouteTable: "Inspection_VPC_Route_Table",
      transitGatewayVpcAttachment: "spoke-vpc-1-attachment",
    }),
  },
  {
    type: "TransitGatewayRouteTablePropagation",
    group: "EC2",
    dependencies: ({}) => ({
      transitGatewayRouteTable: "Inspection_VPC_Route_Table",
      transitGatewayVpcAttachment: "spoke-vpc-2-attachment",
    }),
  },
  {
    type: "Role",
    group: "IAM",
    name: "test-ssm-ec2",
    properties: ({}) => ({
      AssumeRolePolicyDocument: {
        Version: "2012-10-17",
        Statement: [
          {
            Sid: "",
            Effect: "Allow",
            Principal: {
              Service: `ec2.amazonaws.com`,
            },
            Action: "sts:AssumeRole",
          },
        ],
      },
      AttachedPolicies: [
        {
          PolicyName: "AmazonEC2RoleforSSM",
          PolicyArn: "arn:aws:iam::aws:policy/service-role/AmazonEC2RoleforSSM",
        },
        {
          PolicyName: "AmazonSSMManagedInstanceCore",
          PolicyArn: "arn:aws:iam::aws:policy/AmazonSSMManagedInstanceCore",
        },
      ],
    }),
  },
  {
    type: "InstanceProfile",
    group: "IAM",
    name: "terraform-ssm-ec2",
    dependencies: ({}) => ({
      roles: ["test-ssm-ec2"],
    }),
  },
  {
    type: "Key",
    group: "KMS",
    name: "kms-key-aws-hub-and-spoke-demo",
    properties: ({ config }) => ({
      Description: "KMS Logs Key",
      Policy: {
        Version: "2012-10-17",
        Statement: [
          {
            Sid: "Enable IAM User Permissions",
            Effect: "Allow",
            Principal: {
              AWS: `arn:aws:iam::${config.accountId()}:root`,
            },
            Action: "kms:*",
            Resource: `*`,
          },
          {
            Sid: "Enable KMS to be used by CloudWatch Logs",
            Effect: "Allow",
            Principal: {
              Service: `logs.${config.region}.amazonaws.com`,
            },
            Action: [
              "kms:ReEncrypt*",
              "kms:GenerateDataKey*",
              "kms:Encrypt*",
              "kms:Describe*",
              "kms:Decrypt*",
            ],
            Resource: `*`,
          },
        ],
      },
    }),
  },
  {
    type: "Firewall",
    group: "NetworkFirewall",
    properties: ({}) => ({
      DeleteProtection: false,
      FirewallName: "NetworkFirewall",
      FirewallPolicyChangeProtection: false,
      SubnetChangeProtection: false,
    }),
    dependencies: ({ config }) => ({
      vpc: "inspection-vpc",
      subnets: [
        `inspection-vpc::inspection-vpc-private-subnet-${config.region}a`,
        `inspection-vpc::inspection-vpc-private-subnet-${config.region}b`,
        `inspection-vpc::inspection-vpc-private-subnet-${config.region}c`,
      ],
      firewallPolicy: "firewall-policy",
    }),
  },
  {
    type: "Policy",
    group: "NetworkFirewall",
    properties: ({ getId }) => ({
      FirewallPolicy: {
        StatefulRuleGroupReferences: [
          {
            ResourceArn: `${getId({
              type: "RuleGroup",
              group: "NetworkFirewall",
              name: "drop-ssh-between-spokes",
            })}`,
          },
          {
            ResourceArn: `${getId({
              type: "RuleGroup",
              group: "NetworkFirewall",
              name: "block-domains",
            })}`,
          },
        ],
        StatelessDefaultActions: ["aws:forward_to_sfe"],
        StatelessFragmentDefaultActions: ["aws:forward_to_sfe"],
        StatelessRuleGroupReferences: [
          {
            Priority: 20,
            ResourceArn: `${getId({
              type: "RuleGroup",
              group: "NetworkFirewall",
              name: "drop-icmp",
            })}`,
          },
        ],
      },
      FirewallPolicyName: "firewall-policy",
    }),
    dependencies: ({}) => ({
      ruleGroups: ["block-domains", "drop-icmp", "drop-ssh-between-spokes"],
    }),
  },
  {
    type: "RuleGroup",
    group: "NetworkFirewall",
    properties: ({}) => ({
      RuleGroup: {
        RuleVariables: {
          IPSets: {
            HOME_NET: {
              Definition: ["10.11.0.0/16", "10.12.0.0/16"],
            },
          },
        },
        RulesSource: {
          RulesSourceList: {
            GeneratedRulesType: "DENYLIST",
            TargetTypes: ["HTTP_HOST", "TLS_SNI"],
            Targets: [".twitter.com", ".facebook.com"],
          },
        },
      },
      Capacity: 100,
      RuleGroupName: "block-domains",
      Type: "STATEFUL",
    }),
  },
  {
    type: "RuleGroup",
    group: "NetworkFirewall",
    properties: ({}) => ({
      RuleGroup: {
        RulesSource: {
          StatelessRulesAndCustomActions: {
            StatelessRules: [
              {
                Priority: 1,
                RuleDefinition: {
                  Actions: ["aws:drop"],
                  MatchAttributes: {
                    Destinations: [
                      {
                        AddressDefinition: "0.0.0.0/0",
                      },
                    ],
                    Protocols: [1],
                    Sources: [
                      {
                        AddressDefinition: "0.0.0.0/0",
                      },
                    ],
                  },
                },
              },
            ],
          },
        },
      },
      Capacity: 1,
      RuleGroupName: "drop-icmp",
      Type: "STATELESS",
    }),
  },
  {
    type: "RuleGroup",
    group: "NetworkFirewall",
    properties: ({}) => ({
      RuleGroup: {
        RuleVariables: {
          IPSets: {
            SPOKE_VPCS: {
              Definition: ["10.11.0.0/16", "10.12.0.0/16"],
            },
          },
        },
        RulesSource: {
          RulesString:
            '      drop tcp $SPOKE_VPCS any <> $SPOKE_VPCS 22 (msg:"Blocked SSH attempt"; sid:100; rev:1;)\n',
        },
      },
      Capacity: 100,
      RuleGroupName: "drop-ssh-between-spokes",
      Type: "STATEFUL",
    }),
  },
  {
    type: "LoggingConfiguration",
    group: "NetworkFirewall",
    properties: ({}) => ({
      LoggingConfiguration: {
        LogDestinationConfigs: [
          {
            LogDestination: {
              logGroup: "/aws/network-firewall/flows",
            },
            LogDestinationType: "CloudWatchLogs",
            LogType: "FLOW",
          },
          {
            LogDestination: {
              logGroup: "/aws/network-firewall/alerts",
            },
            LogDestinationType: "CloudWatchLogs",
            LogType: "ALERT",
          },
        ],
      },
      FirewallName: "NetworkFirewall",
    }),
    dependencies: ({}) => ({
      firewall: "NetworkFirewall",
      logGroups: [
        "/aws/network-firewall/alerts",
        "/aws/network-firewall/flows",
      ],
    }),
  },
];
