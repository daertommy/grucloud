// Generated by 'gc gencode'
const {} = require("rubico");
const {} = require("rubico/x");

exports.createResources = () => [
  {
    type: "EventBus",
    group: "CloudWatchEvents",
    properties: ({}) => ({
      Name: "EventbridgePipesSqsToEventbridgeStackeventbus5FFF751F",
    }),
  },
  {
    type: "Role",
    group: "IAM",
    properties: ({ config }) => ({
      RoleName:
        "EventbridgePipesSqsToEventbridgeStack-roleC7B7E775-149BW0CC9YR1V",
      AssumeRolePolicyDocument: {
        Statement: [
          {
            Action: "sts:AssumeRole",
            Effect: "Allow",
            Principal: {
              Service: "pipes.amazonaws.com",
            },
          },
        ],
        Version: "2012-10-17",
      },
      Policies: [
        {
          PolicyDocument: {
            Statement: [
              {
                Action: [
                  "sqs:DeleteMessage",
                  "sqs:GetQueueAttributes",
                  "sqs:ReceiveMessage",
                ],
                Effect: "Allow",
                Resource: `arn:aws:sqs:${
                  config.region
                }:${config.accountId()}:EventbridgePipesSqsToEventbridgeStack-sqsqueueE70CFDBB-JHT9xJPmXwFr`,
              },
            ],
            Version: "2012-10-17",
          },
          PolicyName: "sourcePolicy",
        },
        {
          PolicyDocument: {
            Statement: [
              {
                Action: "events:PutEvents",
                Effect: "Allow",
                Resource: `arn:aws:events:${
                  config.region
                }:${config.accountId()}:event-bus/EventbridgePipesSqsToEventbridgeStackeventbus5FFF751F`,
              },
            ],
            Version: "2012-10-17",
          },
          PolicyName: "targetPolicy",
        },
      ],
    }),
  },
  {
    type: "Pipe",
    group: "Pipes",
    properties: ({}) => ({
      Name: "pipe-1oSrLv4grgjg",
      SourceParameters: {
        SqsQueueParameters: {
          BatchSize: 5,
          MaximumBatchingWindowInSeconds: 120,
        },
      },
      TargetParameters: {
        EventBridgeEventBusParameters: {
          DetailType: "OrderCreated",
          Source: "myapp.orders",
        },
        InputTemplate: `{
          "orderId": "<$.body.orderId>",
          "customerId": "<$.body.customerId>"
        }`,
      },
    }),
    dependencies: ({}) => ({
      iamRole:
        "EventbridgePipesSqsToEventbridgeStack-roleC7B7E775-149BW0CC9YR1V",
      sourceSQSQueue:
        "EventbridgePipesSqsToEventbridgeStack-sqsqueueE70CFDBB-JHT9xJPmXwFr",
      targetCloudWatchEventsEventBus:
        "EventbridgePipesSqsToEventbridgeStackeventbus5FFF751F",
    }),
  },
  {
    type: "Queue",
    group: "SQS",
    properties: ({}) => ({
      QueueName:
        "EventbridgePipesSqsToEventbridgeStack-sqsqueueE70CFDBB-JHT9xJPmXwFr",
    }),
  },
];
