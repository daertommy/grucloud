// Generated by 'gc gencode'
const {} = require("rubico");
const {} = require("rubico/x");

exports.createResources = () => [
  {
    type: "Vault",
    group: "Glacier",
    properties: ({ config }) => ({
      policy: {
        Policy: {
          Version: "2012-10-17",
          Statement: [
            {
              Sid: "add-read-only-perm",
              Effect: "Allow",
              Principal: "*",
              Action: ["glacier:InitiateJob", "glacier:GetJobOutput"],
              Resource: `arn:aws:glacier:${
                config.region
              }:${config.accountId()}:vaults/my-vault`,
            },
          ],
        },
      },
      vaultName: "my-vault",
      vaultNotificationConfig: {
        Events: ["ArchiveRetrievalCompleted", "InventoryRetrievalCompleted"],
      },
    }),
    dependencies: ({}) => ({
      snsTopic: "topic-glacier",
    }),
  },
  { type: "Topic", group: "SNS", name: "topic-glacier" },
];
